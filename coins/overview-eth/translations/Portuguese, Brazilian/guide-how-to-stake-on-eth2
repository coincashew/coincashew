---
description: >-
  Torne-se um validador e ajude a proteger eth2, uma blockchain proof-of-stake Qualquer um com 32 ETH pode entrar.
---

# Guia: Como fazer staking no Mantenedor ETH2 com Prysm no Ubuntu

{% hint style="danger" %}
**AtualizaÃ§Ã£o de Novembro 24 2020**: O [novo guia principal estÃ¡ localizado aqui](guide-or-how-to-setup-a-validator-on-eth2-mainnet/).

As instruÃ§Ãµes abaixo estÃ£o agora obsoletas e apenas para referÃªncia.
{% endhint %}











{% hint style="info" %}
[Prysm](https://github.com/prysmaticlabs/prysm) Ã© uma implementaÃ§Ã£o Go do protocolo Ethereum 2.0 com foco na usabilidade, seguranÃ§a e confiabilidade. Prysm Ã© desenvolvido pelo [LaboratÃ³rio PrysmÃ¡tico](https://prysmaticlabs.com/), uma empresa com o Ãºnico foco no desenvolvimento de seu cliente. Prysm Ã© escrito em Go e lanÃ§ado sob uma licenÃ§a GPL-3.0.
{% endhint %}

## ğŸ 0. PrÃ©-requisitos

### ğŸ‘©ğŸ’» Habilidades para operar um validador eth2 e um nÃ³ de farol

Como um validador para eth2, vocÃª normalmente terÃ¡ as seguintes habilidades:

* conhecimento operacional de como configurar, executar e manter um nÃ³ eth2 e validador continuamente
* um compromisso de manter seu validador 24/7/365
* habilidades bÃ¡sicas do sistema operacional
* aprendeu o essencial ao ver ['Intro a Eth2 & Staking for Beginners' by Superphiz](https://www.youtube.com/watch?v=tpkpW031RCI)
* foram aprovados ou estÃ£o ativamente matriculados no [Curso do Estudo Eth2 Master](https://ethereumstudymaster.com/)
* e ter lido [8 Coisas Todos os validadores do Eth2 devem saber.](https://medium.com/chainsafe-systems/8-things-every-eth2-validator-should-know-before-staking-94df41701487)

### ğŸ— **Requisitos mÃ­nimos de configuraÃ§Ã£o**

* **Sistema operacional:** 64-bit Linux \(por exemplo, Ubuntu 20.04 LTS\)
* **Processador:** ual core CPU, Intel Core i5â€“760 ou AMD FX-8100 ou melhor
* **Memory:** 8GB RAM
* **Armazenamento:** 20GB de SSD
* **Internet:** ConexÃ£o de Internet de banda larga com velocidades de pelo menos 1 Mbps.
* **Poder:** Energia elÃ©trica confiÃ¡vel.
* **Saldo ETH:** pelo menos 32 ETH e alguns ETH pelas taxas de transaÃ§Ã£o de depÃ³sito
* **Carteira**: Metamask instalado

### :person_elevando_pesos:â™‚ ConfiguraÃ§Ã£o de hardware recomendada

* **Sistema operacional:** 64-bit Linux \(por exemplo, Ubuntu 20.04 LTS\)
* **Processador:** Quad core CPU, Intel Core i7â€“4770 ou AMD FX-8310 ou superior
* **MemÃ³ria:** 16 GB de RAM ou mais
* **Armazenamento:** 1TB SSD ou mais
* **Internet:** ConexÃµes Ã  Internet de banda larga com velocidades de pelo menos 10 Mbps
* **Poder:** Confiabilidade de energia elÃ©trica com fonte ininterrupta \(UPS\)
* **Saldo ETH:** pelo menos 32 ETH e alguns ETH pelas taxas de transaÃ§Ã£o de depÃ³sito
* **Carteira**: Metamask instalado

{% hint style="warning" %}
âœ¨ **Dica do Pro Validator**: altamente recomendÃ¡vel comeÃ§ar com uma nova instÃ¢ncia de SO, VM e/ou mÃ¡quina. Evite dores de cabeÃ§a NÃƒO reutilizando chaves de testnet ou bancos de dados para seu validador mainnet.
{% endhint %}

### :desbloqueado: Validador de Melhores PrÃ¡ticas de SeguranÃ§a Recomendadas

Se precisar de ideias ou um lembrete sobre como proteger seu validador, consulte

{% page-ref page="guide-or-security-best-practices-for-a-eth2-validator-beaconchain-node.md" %}

### ğŸ›  Setup Ubuntu

Se vocÃª precisar instalar o Ubuntu, consulte

{% page-ref page="../overview-xtz/guide-how-to-setup-a-baker/install-ubuntu.md" %}

### ğŸ­ ConfiguraÃ§Ã£o de Metamask

Se vocÃª precisar instalar o Metamask, consulte

{% page-ref page="../../wallets/browser-wallets/metamask-ethereum.md" %}

## ğŸŒ± 1. Compre/troca ou consolidaÃ§Ã£o ETH

{% hint style="info" %}
Cada 32 ETH que vocÃª possui permite que vocÃª faÃ§a 1 validador. VocÃª pode executar milhares de validadores com o seu nÃ³ de sinalizador.
{% endhint %}

Seu ETH \(ou mÃºltiplos de 32 ETH\) devem ser consolidados em um Ãºnico endereÃ§o acessÃ­vel com Metamask.

Se vocÃª precisar comprar/trocar ou recarregar seu ETH para vÃ¡rios de 32, confira:

{% page-ref page="guide-how-to-buy-eth.md" %}

## ğŸ‘©ğŸ’» 2. Cadastre-se para ser um validador no Launchpad

1. Instale as dependÃªncias, a ferramenta de depÃ³sito da FundaÃ§Ã£o ethereum e gere seus dois conjuntos de pares chave.

{% hint style="info" %}
Cada validador terÃ¡ dois conjuntos de pares de chaves. Uma **assinar a chave** e uma **chave de retirada.** Essas chaves sÃ£o derivadas de uma Ãºnica frase mnemÃ´nica. [Saiba mais sobre chaves.](https://blog.ethereum.org/2020/05/21/keys/)
{% endhint %}

VocÃª tem a opÃ§Ã£o de baixar a ferramenta de depÃ³sito da [ethereum foundation prÃ©-construÃ­da](https://github.com/ethereum/eth2.0-deposit-cli) ou construÃ­-la a partir da fonte.

{% tabs %}
{% tab title="Pre-built eth2deposit-cli" %}
Baixe eth2deposit-cli.

```bash
cd $HOME
wget https://github.com/ethereum/eth2.0-deposit-cli/releases/download/v1.0.0/eth2deposit-cli-9310de0-linux-amd64.tar.gz
```

Verifique se o SHA256 Checksum corresponde ao checksum na [pÃ¡gina de lanÃ§amentos](https://github.com/ethereum/eth2.0-deposit-cli/releases/tag/v1.0.0).

```bash
sha256sum eth2deposit-cli-9310de0-linux-amd64.tar.gz 
# SHA256 deve ser
# b09da136895a7f77a4b430924ea2ae5827fa47b2bf444c4ea6fcfac5b04b8c8a
```

Extraia o arquivo.

```text
tar -xvf eth2deposit-cli-9310de0-linux-amd64.tar.gz
cd eth2deposit-cli-9310de0-linux-amd64
```

FaÃ§a um novo mnemÃ´nico.

```text
./depÃ³sito novo-mnemÃ´nico --chain mainnet
```
{% endtab %}

{% tab title="Build from source code" %}
Instalar dependÃªncias.

```text
sudo apt update
sudo apt install python3-pip git -y
```

Baixe o cÃ³digo-fonte e instale.

```text
mkdir ~/git
cd ~/git
git clone https://github.com/ethereum/eth2.0-deposit-cli.git
cd eth2.0-deposit-cli
sudo ./deposit.sh install
```

FaÃ§a um novo mnemÃ´nico.

```text
./deposit.sh novo-mnemonic --chain mainnet
```
{% endtab %}

{% tab title="Advanced - Most Secure" %}
{% hint style="warning" %}
ğŸ”¥**\[ Optional \] Pro Security Tip**: Run the eth2deposit-cli tool and generate your **mnemonic seed** for your validator keys on an **air-gapped offline machine**.

VocÃª pode copiar por meio de uma chave USB os binÃ¡rios do eth2deposit-cli prÃ©-construÃ­do de uma mÃ¡quina online para uma mÃ¡quina offline destacada.

* Protege contra ataques de registro de chaves, ataques baseados em malware/vÃ­rus e outros firewall ou exploradores de seguranÃ§a.
* fisicamente isolado do resto da sua rede.
* NÃ£o Ã© possÃ­vel ter uma conexÃ£o de rede, com fio ou sem fio.
* NÃ£o Ã© uma VM em uma mÃ¡quina com conexÃ£o Ã  rede.
* Saiba mais sobre [aerotanque no wikipedia](https://en.wikipedia.org/wiki/Air_gap_%28networking%29).
{% endhint %}
{% endtab %}
{% endtabs %}

1. Siga as instruÃ§Ãµes e escolha uma senha. Anote seu mnemÃ´nico e mantenha seguro e **offline**.
2. Siga as etapas em [https://launchpad.ethereum.org/](https://launchpad.ethereum.org/) enquanto ignorar as etapas que vocÃª jÃ¡ acabou de completar. Estude o material geral da etapa 2 da fase 0. Compreender o eth2 Ã© a chave para o sucesso!
3. Volte ao site do launchpad , carregue seu`deposit_data-#########.json` encontrado no diretÃ³rio `validator_keys`.
4. Conecte ao launchpad com sua carteira Metamask e revise e aceite os termos.
5. Confirme a transaÃ§Ã£o(s\). HÃ¡ uma transaÃ§Ã£o de depÃ³sito de 32 ETH para cada validador.

{% hint style="info" %}
Your transaction is sending and depositing your ETH to the [official ETH2 deposit contract address. ](https://blog.ethereum.org/2020/11/04/eth2-quick-update-no-19/)

**Verifique**, _double-check_, _**verificaÃ§Ã£o tripla**_ que o endereÃ§o oficial do contrato do depÃ³sito da Eth2 estÃ¡ correto.[`0x00000000219ab540356cBB839Cbe05303d7705Fa`](https://etherscan.io/address/0x00000000219ab540356cbb839cbe05303d7705fa)
{% endhint %}

{% hint style="danger" %}
NÃ£o se esqueÃ§a de anotar ou gravar sua semente mnemÃ´nica **offline**. _NÃ£o Ã© e-mail. NÃ£o estÃ¡ nublado._

FaÃ§a **backups off-line**, como uma chave USB, de **`validator_keys`** \`\`directory.
{% endhint %}

## ğŸ›¸ 3. Install a ETH1 node

{% hint style="info" %}
O Ethereum 2.0 requer uma conexÃ£o com a Ethereum 1.0 para monitorar para 32 depÃ³sitos validadores do ETH. Organizar o seu prÃ³prio nÃ³ Ethereum 1.0 Ã© a melhor maneira de maximizar a descentralizaÃ§Ã£o e minimizar a dependÃªncia de terceiros, como Infura.
{% endhint %}

{% hint style="warning" %}
Os passos subsequentes assumem que vocÃª concluiu o [guia de seguranÃ§a das melhores prÃ¡ticas](guide-or-security-best-practices-for-a-eth2-validator-beaconchain-node.md).
{% endhint %}

Sua escolha entre [**OpenEthereum**](https://www.parity.io/ethereum/)**,** [**Obter**](https://geth.ethereum.org/)**, ,** [**Besu**](https://besu.hyperledger.org/) **ou** [**Nethermind**](https://www.nethermind.io/)**.**

{% tabs %}
{% tab title="OpenEthereum \(Parity\)" %}
#### ğŸ¤– Instale e execute o OpenEthereum.

```text
mkdir ~/openethereum && cd ~/openethereum
wget https://github.com/openethereum/openethereum/releases/download/v3.0.1/openethereum-linux-v3.0.1.zip
unzip *.zip
chmod +x openethereum
rm openethereum*.zip 

```

(ExplicitText="âš™ **ConfiguraÃ§Ã£o e configuraÃ§Ã£o do sistema**

Execute o seguinte para criar um **arquivo unitÃ¡rio** para definir a sua configuraÃ§Ã£o de `eth1.service`.

```bash
gato > $HOME/eth1. ervice << EOF 
[Unit]
DescriÃ§Ã£o = serviÃ§o eth1 openethereum
Desejos = rede online. arget
Depois = rede online. arget 

[Service]
UsuÃ¡rio = $(whoami)
WorkingDirectory= /home/$(whoami)/openethereum
ExecStart = /home/$(whoami)/openethereum/openethereum --chain foundation
Restart = on-failure

[Install]
WantedBy = multi-user. arget
EOF
```

Mover o arquivo unitÃ¡rio para `/etc/systemd/system` e dar-lhe permissÃµes.

```bash
sudo mv $HOME/eth1.service /etc/systemd/system/eth1.service
```

```bash
sudo chmod 644 /etc/systemd/system/eth1.service
```

Execute o seguinte para ativar o inÃ­cio automÃ¡tico na hora de inicializaÃ§Ã£o.

```text
sudo systemctl daemon-reload
sudo systemctl enable eth1
```

#### â›“ Comece o OpenEthereum no mainnet.

```text
sudo systemctl start eth1
```
{% endtab %}

{% tab title="Geth" %}
#### ğŸ§¬ Instalar do repositÃ³rio.

```text
sudo add-apt-repository -y ppa:ethereum/ethereum
sudo apt-get update -y
sudo apt-get install ethereum -y
```

âš™ **Configurar e configurar o systemd**

Execute o seguinte para criar um **arquivo unitÃ¡rio** para definir a sua configuraÃ§Ã£o de `eth1.service`.

```bash
gato > $HOME/eth1. ervice << EOF 
[Unit]
DescriÃ§Ã£o = obter serviÃ§o eth1
Desejos = rede online. arget
Depois = rede online. arget 

[Service]
UsuÃ¡rio = $(whoami)
ExecStart = /usr/bin/geth --rpc --http
Restart = on-failure

[Install]
WantedBy = multi-usuÃ¡rio. arget
EOF
```

Mover o arquivo unitÃ¡rio para `/etc/systemd/system` e dar-lhe permissÃµes.

```bash
sudo mv $HOME/eth1.service /etc/systemd/system/eth1.service
sudo chmod 644 /etc/systemd/system/eth1.service
```

Execute o seguinte para ativar o inÃ­cio automÃ¡tico na hora de inicializaÃ§Ã£o.

```text
sudo systemctl daemon-reload
sudo systemctl enable eth1
```

#### â›“ Comece a pegar no mainnet.

```text
sudo systemctl start eth1
```
{% endtab %}

{% tab title="Besu" %}
#### ğŸ§¬ Instalar dependÃªncia Java.

```text
sudo apt install openjdk-11-jdk
```

#### ğŸŒœ Baixar e descompactar Besu.

```text
cd
wget -O besu.tar.gz https://bintray.com/hyperledger-org/besu-repo/download_file?file_path=besu-1.5.0.tar.gz
tar -xvf besu.tar.gz
rm besu.tar.gz
mv besu-1.5.0 besu
```

âš™ **Configurar e configurar o systemd**

Execute o seguinte para criar um **arquivo unitÃ¡rio** para definir a sua configuraÃ§Ã£o de `eth1.service`.

```bash
gato > $HOME/eth1. ervice << EOF 
[Unit]
DescriÃ§Ã£o = serviÃ§o eth1 openethereum
Desejos = rede online. arget
Depois = rede online. arget 

[Service]
UsuÃ¡rio = $(whoami)
WorkingDirectory= /home/$(whoami)/besu/bin
ExecStart = /home/$(whoami)/besu/bin/besu --data-path="$HOME/. thereum_besu"
Reiniciar = on-failed

[Install]
WantedBy = multi-usuÃ¡rio. arget
EOF
```

Mover o arquivo unitÃ¡rio para `/etc/systemd/system` e dar-lhe permissÃµes.

```bash
sudo mv $HOME/eth1.service /etc/systemd/system/eth1.service
sudo chmod 644 /etc/systemd/system/eth1.service
```

Execute o seguinte para ativar o inÃ­cio automÃ¡tico na hora de inicializaÃ§Ã£o.

```text
sudo systemctl daemon-reload
sudo systemctl enable eth1
```

#### â›“ Iniciar besu no mainnet.

```text
sudo systemctl start eth1
```
{% endtab %}

{% tab title="Nethermind" %}
#### âš™ Instalar dependÃªncias.

```text
sudo apt-get update && sudo apt-get install libsnappy-dev libc6-dev libc6 unzip -y
```

#### ğŸŒœ Baixar e descompactar o Nethermin.

```text
mkdir ~/nethermind && cd ~/nethermind
wget -O nethermind.zip https://nethdev.blob.core.windows.net/builds/nethermind-linux-amd64-1.8.77-9d3a58a.zip
unzip nethermind.zip
rm nethermind.zip
```

#### ğŸ›¸ LanÃ§a Nethermente.

```text
./Nethermind.Launcher
```

* Selecione `NÃ³ Ethereum`
* Selecione `Ethereum (mainnet)` e depois selecione `SincronizaÃ§Ã£o rÃ¡pida`
* Sim para habilitar RPC web3 / JSON
* Aceitar IP padrÃ£o
* Ignorar registro do ethstats
{% endtab %}

{% tab title="Minimum Hardware Setup" %}
{% hint style="info" %}
A Infura Ã© adequada para configuraÃ§Ãµes de espaÃ§o em disco limitado. Sempre execute seu prÃ³prio nÃ³ completo em eth1 quando possÃ­vel.
{% endhint %}

Cadastre-se para uma chave de acesso API em [https://infura.io/](https://infura.io/)

1. Crie uma conta gratuita.
2. Confirme seu endereÃ§o de e-mail.
3. Acesse seu painel de controle [https://infura.io/dashboard](https://infura.io/dashboard)
4. Crie um projeto, dÃª um nome a ele.
5. Selecione **principal** como o ENDPOINT
6. Copie sua chave da API.
7. Atualize o parÃ¢metro **http-web3provider** na seÃ§Ã£o **comece o beacon chain**.

```bash
#parÃ¢metro de exemplo
--http-web3provider=https://infura.io/v3/<YOUR_API_KEY>
```
{% endtab %}
{% endtabs %}



{% hint style="info" %}
A sincronizaÃ§Ã£o do nÃ³ eth1 pode demorar atÃ© 24 horas.
{% endhint %}

{% hint style="success" %}
O seu nÃ³ eth1 estÃ¡ totalmente sincronizado quando estes eventos ocorrem.

* **`OpenEthereum:`** `Imported #<block number>`
* **`Geth:`** `Segmento da cadeia importado`
* **`Besu:`** `Importado #<block number>`
* **`Nethermind:`** `NÃ£o sincronizando mais cabeÃ§alhos antigos`
{% endhint %}

#### ğŸ›  Comandos eth1.serviÃ§o Ãºteis

Â£ğŸ—’ **Para visualizar e seguir logs de eth1**

```text
journalctl -u eth1 -f
```

ğŸ—’ **Para parar o serviÃ§o eth1**

```text
sudo systemctl stop eth1
```

{% hint style="danger" %}
ğŸ›‘ **Antes de continuar o resto deste guia, recomendamos que vocÃª espere atÃ© mais perto de Dez 1, uma vez que o cÃ³digo Prysm estÃ¡ se preparando rapidamente para o mainnet.**ğŸš§
{% endhint %}

## ğŸ’¡ 4. Install Prysm

```bash
mkdir ~/prysm && cd ~/prysm 
curl https://raw.githubusercontent.com/prysmaticlabs/prysm/master/prysm.sh --output prysm.sh && chmod +x prysm.sh 
```

{% hint style="info" %}
Prysm Ã© um cliente Ethereum 2.0 e estÃ¡ presente em dois componentes.

**Beacon chain client** - ResponsÃ¡vel por gerenciar o estado da cadeia de farinha, validador desfocado e muito mais.

**Cliente validador** - ResponsÃ¡vel por produzir novos blocos e atestaÃ§Ãµes na cadeia de sinalizadores e cadeias de fragmentos.
{% endhint %}

## ğŸ”¥ 5. Configurar o encaminhamento de porta e/ou firewall

EspecÃ­fico para sua configuraÃ§Ã£o de rede ou configuraÃ§Ãµes do provedor da nuvem, [certifique-se de que as portas do firewall do seu validador estÃ£o abertas e acessÃ­veis.](guide-or-security-best-practices-for-a-eth2-validator-beaconchain-node.md#configure-your-firewall)

* **Prysm beacon chain node** irÃ¡ usar a porta 12000 para udp e a porta 13000 para tcp
* **eth1** o nÃ³ requer porta 30303 para tcp e udp

{% hint style="info" %}
âœ¨ **Dica de Redirecionamento de Porta:** VocÃª precisarÃ¡ encaminhar e abrir as portas ao seu validador. Verifique se estÃ¡ funcionando com [https://www.yougetsignal.com/tools/open-ports/](https://www.yougetsignal.com/tools/open-ports/) ou [https://canyouseeme.org/](https://canyouseeme.org/).
{% endhint %}

## ğŸ© 6. Importar chave do validador

Escolha o comando correto dependendo de como vocÃª instalou o **eth2deposit-cli.**

{% tabs %}
{% tab title="Pre-built eth2deposit-cli" %}
```bash
$HOME/prysm/prysm.sh validator accounts import --keys-dir=$HOME/eth2deposit-cli-9310de0-linux-amd64/validator_keys
```
{% endtab %}

{% tab title="Built from source code" %}
```bash
$HOME/prysm/prysm.sh validator accounts import --keys-dir=$HOME/git/eth2.0-deposit-cli/validator_keys
```
{% endtab %}
{% endtabs %}

Aceitar localizaÃ§Ã£o padrÃ£o da carteira, insira uma nova senha para criptografar sua carteira e digite a senha para suas contas importadas.

{% hint style="danger" %}
**AVISO**: NÃƒO USE OS CHAVES ORIGINAIS PARA VALIDAR COM OUTRO CLIENTE, OU VOCÃŠ GANHARÃ SALIDADO.
{% endhint %}

## ğŸ‚ 7. Inicie o sinalizador

{% hint style="warning" %}
Se vocÃª participou de alguma das redes de teste anteriores, vocÃª precisa limpar o banco de dados.

```bash
$HOME/prysm/prysm.sh beacon-chain --clear-db
```
{% endhint %}

Sua escolha de rodar uma cadeia de beacon e validador manualmente da linha de comando ou automaticamente com o sistema.

{% tabs %}
{% tab title="Systemd - Automated" %}
#### ğŸ° BenefÃ­cios de usar sistema para a sua cadeia de sinalizadores e validadores <a id="benefits-of-using-systemd-for-your-stake-pool"></a>

1. Inicie automaticamente a cadeia de sinalizaÃ§Ã£o quando o computador reinicia devido a manutenÃ§Ã£o, falta de energia, etc.
2. Reiniciar automaticamente o beacon com processos em cadeia quebrados.
3. Maximize seu farol chain up e performance.

#### ğŸ›  InstruÃ§Ãµes de configuraÃ§Ã£o

Execute o seguinte para criar um **arquivo unitÃ¡rio** para definir a configuraÃ§Ã£o do seu`beacon-chain.service`.

```bash
gato > $HOME/beacon-chain. ervice << EOF 
# O serviÃ§o de cadeia de feixes eth2 (parte do sistema)
# arquivo: /etc/systemd/system/beacon-chain. ervice 

[Unit]
DescriÃ§Ã£o = eth2 beacon service em cadeia
Desejados = rede online. arget
Depois = rede online. arget 

[Service]
UsuÃ¡rio = $(whoami)
Ambiente = "ClientIP=$(curl -s v4. dent.me)"
WorkingDirectory= /home/$(whoami)/prysm
ExecStart = /home/$(whoami)/prysm/prysm.sh beacon-chain --p2p-host-ip=${ClientIP} --monitoring-host="0.0.0. " --http-web3provider=http://127.0.0. :8545 --accept-terms-of-use 
Restart = on-failure

[Install]
WantedBy = multi-usuÃ¡rio. arget
EOF
```

{% hint style="info" %}
UsuÃ¡rios do Geth podem obter maior desempenho com

```bash
--http-web3provider=$HOME/.ethereum/geth.ipc
```
{% endhint %}

Mover o arquivo unitÃ¡rio para `/etc/systemd/system` e dar-lhe permissÃµes.

```bash
sudo mv $HOME/beacon-chain.service /etc/systemd/system/beacon-chain.service
sudo chmod 644 /etc/systemd/system/beacon-chain.service
```

Execute o seguinte para ativar o inÃ­cio automÃ¡tico na hora de inicializar e, em seguida, iniciar o seu serviÃ§o com o nÃ³ de sinal.

```text
sudo systemctl daemon-reload
sudo systemctl enable beacon-chain
sudo systemctl start beacon-chain
```

{% hint style="success" %}
Bom trabalho. Sua cadeia de sinalizaÃ§Ã£o agora Ã© gerenciada pela confiabilidade e robustez do sistema. Abaixo estÃ£o alguns comandos para usar o sistema.
{% endhint %}

### ğŸ›  Alguns comandos Ãºteis no sistema

#### âœ… Verifique se a cadeia de sinalizaÃ§Ã£o estÃ¡ ativa

```text
sudo systemctl estÃ¡ ativo beacon-chain
```

#### ğŸ” Veja o status da cadeia de sinalizaÃ§Ã£o

```text
sudo systemctl status beacon-chain
```

#### ğŸ”„ Reiniciando a cadeia de sinalizaÃ§Ã£o

```text
sudo systemctl recload-or-reiniciar beacon-chain
```

#### ğŸ›‘ Parando a cadeia de sinalizador

```text
sudo systemctl stop beacon-chain
```

#### ğŸ—’ Visualizando e filtrando logs

```bash
journalctl --unit=beacon-chain --since=ontem
journalctl --unit=beacon-chain --since=today
journalctl --unit=beacon-chain --since='2020-12-01 00:00' --until='2020-12-02 12:00:00'
```
{% endtab %}

{% tab title="CLI - Manual" %}
Em um novo terminal, inicie a cadeia de sinalizador.

```bash
$HOME/prysm/prysm.sh beacon-chain \
--p2p-host-ip=$(curl -s v4.ident.me) \
--http-web3provider="http://127.0.0.1:8545"
--monitoring-host="0.0.0" \
--accept-terms-of-use
```

{% hint style="info" %}
UsuÃ¡rios do Geth podem obter maior desempenho com

```bash
--http-web3provider=$HOME/.ethereum/geth.ipc
```
{% endhint %}
{% endtab %}
{% endtabs %}

## ğŸ§¬ 8. Iniciar o validador <a id="9-start-the-validator"></a>

Armazene a senha do seu validador em um arquivo e torna-o somente para leitura.

```bash
echo "my_password_goes_here" > $HOME/.eth2validators/validators-password.txt
sudo chmod 600 $HOME/.eth2validators/validators-password.txt
```

Sua escolha de executar um validador manualmente da linha de comando ou automaticamente com o sistema.

{% tabs %}
{% tab title="Systemd - Automated" %}
#### ğŸ° BenefÃ­cios de usar sistema para seu validador <a id="benefits-of-using-systemd-for-your-stake-pool"></a>

1. Iniciar automaticamente o validador quando o computador reinicia devido a manutenÃ§Ã£o, falta de energia, etc.
2. Automaticamente reiniciar os processos do validador falhados.
3. Maximize seu validador a tempo e desempenho.

#### ğŸ›  InstruÃ§Ãµes de configuraÃ§Ã£o

Execute o seguinte para criar um **arquivo unitÃ¡rio** para definir a configuraÃ§Ã£o do seu`validator.service`.

```bash
gato > $HOME/validator. ervice << EOF 
# O serviÃ§o de validaÃ§Ã£o eth2 (parte do sistema)
# arquivo: /etc/systemd/system/system/validator. ervice 

[Unit]
DescriÃ§Ã£o = serviÃ§o de validador eth2
Desejados = rede online. arget beacon-chain.service
After = network online. arget 

[Service]
UsuÃ¡rio = $(whoami)
WorkingDirectory= /home/$(whoami)/prysm
ExecStart = /home/$(whoami)/prysm/prysm. h validador --accept-terms-of-use --wallet-password-file /home/$(whoami)/.eth2validators/validators-password. xt
Restart = on-failu

[Install]
WantedBy = multi-usuÃ¡rio. arget
EOF
```

Mover o arquivo unitÃ¡rio para `/etc/systemd/system` e dar-lhe permissÃµes.

```bash
sudo mv $HOME/validator.service /etc/systemd/system/validator.service
sudo chmod 644 /etc/systemd/system/validator.service
```

Execute o seguinte para ativar o inÃ­cio automÃ¡tico na hora de inicializar e depois iniciar o validador.

```text
sudo systemctl daemon-reload
sudo systemctl enable validator
sudo systemctl start validator
```

### ğŸ›  Alguns comandos Ãºteis no sistema

#### âœ… Verifique se o validador estÃ¡ ativo

```text
validador de sudo systemctl estÃ¡ ativo
```

#### ğŸ” Veja o status do validador

```text
sudo systemctl status validator
```

#### ğŸ”„ Reiniciando o validador

```text
sudo systemctl recarregar-or-reiniciar validador
```

#### ğŸ›‘ Parando o validador

```text
sudo systemctl stop validator
```

#### ğŸ—„ Visualizando e filtrando logs

```bash
journalctl --unit=validator --since=ontem
journalctl --unit=validator --since=today
journalctl --unit=validator --since='2020-12-01 00:00:00' --until='2020-12-02 12:00:00'
```
{% endtab %}

{% tab title="CLI - Manual" %}
Em um novo terminal, inicie o validador.

```bash
$HOME/prysm/prysm.sh validator \
--accept-terms-of-use \
--wallet-password-file /home/$(whoami)/.eth2validators/validators-password.txt
```
{% endtab %}
{% endtabs %}

Verifique se sua **chave pÃºblica validador** aparece nos logs. Exemplo abaixo:

```text
INFO Validador habilitado voting_pubkey: 0x2374.....7121
```

{% hint style="info" %}
**Cliente validador** - ResponsÃ¡vel por produzir novos blocos e atestaÃ§Ãµes na cadeia de sinalizadores e cadeias de fragmentos.

**Beacon chain client** - ResponsÃ¡vel por gerenciar o estado da cadeia de farinha, validador desfocado e muito mais.
{% endhint %}

{% hint style="success" %}
ParabÃ©ns. Assim que seu sinalizador estiver sincronizado, valide e rodando, vocÃª sÃ³ espera pela ativaÃ§Ã£o. Este processo demora atÃ© 24 horas. Quando vocÃª for designado, o seu validador comeÃ§arÃ¡ a criar e votar em blocos enquanto ganha ETH staking recompensas.

Use o [beaconcha.in](https://beaconcha.in/) e [registre uma conta](https://beaconcha.in/register) para criar alertas e acompanhar o desempenho de seu validador.
{% endhint %}

## ğŸ•’ 9. SincronizaÃ§Ã£o de Hora

{% hint style="info" %}
Porque o beacon chain depende de horÃ¡rios precisos para executar atestaÃ§Ãµes e produzir blocos, o tempo do seu computador deve ser preciso ao NTP ou NTS tempo real dentro de 0. segundos.
{% endhint %}

Configurar **Chrony** com o seguinte guia.

{% hint style="info" %}
cronia Ã© uma implementaÃ§Ã£o do Protocolo de Tempo de Rede e ajuda a manter o tempo do seu computador sincronizado com NTP.
{% endhint %}

## ğŸ” 10. Monitorando o seu validador com Grafana e Prometheus

Prometheus Ã© uma plataforma de monitoramento que coleta mÃ©tricas de alvos monitorados, removendo mÃ©tricas de endpoints HTTP nesses alvos. [DocumentaÃ§Ã£o oficial estÃ¡ disponÃ­vel aqui.](https://prometheus.io/docs/introduction/overview/) Grafana Ã© um painel usado para visualizar os dados coletados.

### ğŸ£ InstalaÃ§Ã£o 10.1

Instale o exportador de nÃ³ prometheus e prometheus.

```text
sudo apt-get install -y prometheus prometheus-node-exporter
```

Instale o grafana.

```bash
wget -q -O - https://packages.grafana.com/gpg.key â”œsudo apt-key add -
echo "deb https://packages.grafana.com/oss/deb stable main" > grafana. ist
sudo mv grafana.list /etc/apt/sources.list.d/grafana.list
sudo apt-get update && sudo apt-get install -y grafana
```

Habilitar os serviÃ§os para que iniciem automaticamente.

```bash
sudo systemctl habilita grafana-server.service
sudo systemctl habilita prometheus.service
sudo systemctl habilita prometheus-node-exporter.service
```

AtualizaÃ§Ã£o **prometheus.yml** localizada em `/etc/prometheus/prometheus.yml`

```bash
gato > $HOME/prometheus.yml << EOF
global:
  scrape_interval: 15s # por padrÃ£o, alvos de scrape a cada 15 segundos.

  # Anexar essas etiquetas a qualquer sÃ©rie de horas ou alertas ao se comunicar com
  # sistemas externos (federaÃ§Ã£o, armazenamento remoto, Alertmanager).
  external_labels:
    monitor: 'codelab-monitor'

# Uma configuraÃ§Ã£o de scrape contendo exatamente um endpoint para scrape:
# Aqui Ã© o prÃ³prio Prometheus.
scrape_configs:
  - job_name: 'node_exportter'
    static_configs:
      - alvos: ['localhost:9100']
  - job_name: 'validator'
    static_configs:
      - alvos: ['localhost:8081']
  - job_name: 'beacon node'
    static_configs:
      - alvos: ['localhost:808080']
  - job_name: 'slasher'
    static_configs:
      - alvos: ['localhost:8082']
EOF
sudo mv $HOME/prometheus. ml /etc/prometheus/prometheus.yml
```

Por Ãºltimo, reinicie os serviÃ§os.

```bash
sudo systemctl reiniciar grafana-server.service
sudo systemctl reiniciar prometheus.service
sudo systemctl reiniciar prometheus-node-exporter.service
```

Verifique se os serviÃ§os estÃ£o funcionando corretamente:

```text
sudo systemctl status grafana-server.service prometheus.service prometheus-node-exporter.service
```

{% hint style="info" %}
ğŸ’¡ **Lembrete**: certificar que a porta 3000 esteja aberta no firewall e/ou porta encaminhada, se vocÃª pretende ver as informaÃ§Ãµes de monitoramento de uma mÃ¡quina diferente.
{% endhint %}

### ğŸ“¶ 10,2 Configurando painÃ©is do Grafana

1. Abra [http://localhost:3000](http://localhost:3000) ou [http://&lt;your](http://<your) validator's ip address&gt;:3000 no seu navegador local.
2. Entrar com **administrador** / **administrador**
3. Mudar Senha
4. Clique no Ã­cone de **configuraÃ§Ã£o de engrenagem** e depois **Adicionar fonte de dados**
5. Selecione **Prometheus**
6. Defina **Nome** para **"Prometheus**"
7. Define **URL** para [http://localhost:9090](http://localhost:9090)
8. Clique em **Salvar & Testar**
9. **Baixe e salve** este [**arquivo json**](https://raw.githubusercontent.com/GuillaumeMiralles/prysm-grafana-dashboard/master/less_10_validators.json)**.** Ou se tiver mais de 10 validadores, use este [arquivo json](https://raw.githubusercontent.com/GuillaumeMiralles/prysm-grafana-dashboard/master/more_10_validators.json).
10. Clique **Criar +** Ã­cone &gt; **Importar**
11. Adicionar dashboard por **Upload de arquivo JSON**
12. Clique no botÃ£o **Importar**.

![Painel de ImpressÃ£o](../../.gitbook/assets/prysm_dash.png)

### âš  Alerta de ConfiguraÃ§Ã£o 10.3

{% hint style="info" %}
Alertas de configuraÃ§Ã£o para serem notificados se os seus validadores ficarem offline.
{% endhint %}

Seja notificado de problemas com seus validadores. Escolha entre e-mail, telegrama, discord ou laxista.

{% tabs %}
{% tab title="Email Notifications" %}
1. Visite [https://beaconcha.in/](https://beaconcha.in/)
2. Cadastre-se **para uma conta ****
3. Verifique seu **e-mail**
4. Pesquisar o endereÃ§o pÃºblico de seu **validador**
5. Adicione validadores Ã  sua lista de desejos clicando no **sÃ­mbolo de marcador**.
{% endtab %}

{% tab title="Telegram Notifications" %}
1. No menu de Grafana, selecione **canais de notificaÃ§Ã£o** sob o Ã­cone de sino. ![](../../.gitbook/assets/gra-noti.png)
2. Clique em **Adicionar canal**.
3. DÃª ao canal de notificaÃ§Ã£o um **nome**.
4. Selecione **Telegram** na lista de tipos.
5. Para concluir as **configuraÃ§Ãµes da API do Telegram**, um canal e um bot sÃ£o necessÃ¡rios. Para obter instruÃ§Ãµes sobre como configurar um bot com `@Botpai`, consulte [esta seÃ§Ã£o](https://core.telegram.org/bots#6-botfather) da documentaÃ§Ã£o do Telegram.
6. Uma vez concluÃ­do, convide o bot para o canal recÃ©m-criado.
{% endtab %}

{% tab title="Discord Notifications" %}
1. No menu de Grafana, selecione **canais de notificaÃ§Ã£o** sob o Ã­cone de sino. ![](../../.gitbook/assets/gra-noti.png)
2. Clique em **Adicionar canal**.
3. Adicione um **nome** ao canal de notificaÃ§Ã£o.
4. Selecione **Discord** da lista de tipos.
5. Para completar a configuraÃ§Ã£o, um servidor Discord \(e um canal de texto disponÃ­vel\), bem como uma URL de Webhook sÃ£o necessÃ¡rios. Para obter instruÃ§Ãµes sobre como configurar os Webhooks do Discord, consulte [esta seÃ§Ã£o](https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks) de sua documentaÃ§Ã£o.
6. Digite a **URL do Webhook** no painel de configuraÃ§Ãµes de notificaÃ§Ã£o do Discord.
7. Clique em **Enviar Teste**, que irÃ¡ empurrar uma mensagem de confirmaÃ§Ã£o para o canal do Discord.
{% endtab %}

{% tab title="Slack Notifications" %}
1. No menu de Grafana, selecione **canais de notificaÃ§Ã£o** sob o Ã­cone de sino. ![](../../.gitbook/assets/gra-noti.png)
2. Clique em **Adicionar canal**.
3. Adicione um **nome** ao canal de notificaÃ§Ã£o.
4. Selecione **Slack** na lista de tipos.
5. Para obter instruÃ§Ãµes sobre como configurar os Webhooks recebidos do Slack, consulte [esta seÃ§Ã£o](https://api.slack.com/messaging/webhooks) de sua documentaÃ§Ã£o.
6. Digite a URL do Webhook de Entrada do Slack no campo **URL**.
7. Clique em **Enviar Teste**, que irÃ¡ empurrar uma mensagem de confirmaÃ§Ã£o para o canal Slack.
{% endtab %}
{% endtabs %}

{% hint style="success" %}
ğŸ‰ ParabÃ©ns pela configuraÃ§Ã£o do seu validador! VocÃª Ã© bom para ir ao eth2.0.

VocÃª achou nosso guia Ãºtil? Avise-nos com uma dica e continuaremos atualizando.

Use [cointr.ee para encontrar nossos endereÃ§os de doaÃ§Ã£o ](https://cointr.ee/coincashew). ğŸ™Œ

Quaisquer comentÃ¡rios e pull requests muito apreciados. ğŸ˜ƒ

Aguente e converse com outros participantes no telegram @ [https://t.me/coincashew](https://t.me/coincashew)ğŸŒ›
{% endhint %}

## ğŸ§™â™‚ 11. Atualizando Imysm

Reiniciar o beacon chain e validador como um procedimento normal de operaÃ§Ã£o.

{% tabs %}
{% tab title="Systemd - Automated" %}
```text
sudo systemctl reload-or-restart beacon-chain
sudo systemctl reload-or-restart validator
```
{% endtab %}

{% tab title="CLI - Manual" %}
```bash
#Control C para sair do beacon-chain e do processo do validador 
#Pressione a seta para cima e entre para reiniciar.
```
{% endtab %}
{% endtabs %}

## ğŸ§© 12. Material de referÃªncia

Aprecie o trabalho Ã¡rduo realizado pelos excelentes funcionÃ¡rios nas seguintes ligaÃ§Ãµes, que serviram de base Ã  criaÃ§Ã£o deste guia.

{% embed url="https://discord.gg/KSA7rPr" %}

{% embed url="https://launchpad.ethereum.org/" caption="" %}

{% embed url="https://prylabs.net/participa" %}

{% embed url="https://docs.prylabs.network/docs/getting-started/" %}

## ğŸ‰ 13. Links de BÃ´nus

### ğŸŒ° Guias CoinCashew para outros clientes ETH2

{% page-ref page="guide-how-to-stake-on-eth2-with-lighthouse.md" %}

{% page-ref page="guide-how-to-stake-on-eth2-with-teku-on-ubuntu.md" %}

{% page-ref page="guide-how-to-stake-on-eth2-with-nimbus.md" %}

{% page-ref page="guide-how-to-stake-on-eth2-with-lodestar.md" %}

### ğŸ§± Exploradores de Blocos ETH2

{% embed url="https://beaconcha.in" caption="" %}

{% embed url="https://beaconscan.com" caption="" %}

### ğŸ—’ Ãšltimas InformaÃ§Ãµes da Eth2

{% embed url="https://www.reddit.com/r/ethstaker" caption="" %}

{% embed url="https://blog.ethereum.org" caption="" %}

{% embed url="http://invite.gg/ethstaker" legenda="" %}

{% embed url="https://hackmd.io/@benjaminion/eth2\_news/" caption="" %}

## ğŸ”¥ 14. Dicas adicionais Ãºteis

### ğŸ›‘ 14.1 SaÃ­da voluntÃ¡ria de um validador

{% hint style="info" %}
Use este comando para sinalizar suas intenÃ§Ãµes para parar de validar com seu validador. Isso significa que vocÃª nÃ£o quer mais fazer staking com seu validador e quer desativar seu nÃ³.

* A saÃ­da voluntÃ¡ria leva um mÃ­nimo de 2048 perÃ­odos \(ou ~9dias \). HÃ¡ uma fila para sair e um atraso antes que seu validador seja finalmente exilado.
* Uma vez que um validador Ã© encerrado na fase 0, isso nÃ£o Ã© reversÃ­vel e vocÃª nÃ£o pode mais reiniciar a validaÃ§Ã£o novamente.
* Seus fundos nÃ£o estarÃ£o disponÃ­veis para retirada atÃ© a fase 1.5 ou posterior.
* Depois que o validador sai da fila de saÃ­da e Ã© realmente exilado, Ã© seguro desativar o seu nÃ³ e o validador de sinalizador.
{% endhint %}

```bash
$HOME/prysm/prysm.sh contas validator voluntÃ¡rias-SaÃ­das
```

### ğŸ” 14.2 Verifique sua frase mnemÃ´nica

Usando a ferramenta eth2deposit-cli para garantir que vocÃª possa regenerar os mesmos pares de chaves eth2 restaurando seus `validator_keys`

```bash
./depÃ³sito existente-mnemÃ´nico --chain mainnet
```

{% hint style="info" %}
Quando a **pubkey** Ã© idÃªntica, isso significa que seu **arquivo de keystore** que vocÃª verificou corretamente sua frase mnemÃ´nica. Outros campos serÃ£o diferentes por causa da venda.
{% endhint %}

### ğŸ¤– 14.3 Adicionar validadores adicionais

Usando a ferramenta eth2deposit-cli vocÃª pode adicionar mais validadores criando um novo arquivo de dados de depÃ³sito e `validator_keys`

Por exemplo, no caso de criarmos originalmente 3 validadores, mas agora queremos adicionar mais 5 validadores, poderÃ­amos usar o seguinte comando.

```bash
./depositar existente-mnemÃ´nico --validator_start_index 3 --num_validators 5 --chain mainnet
```

Complete os passos para fazer o upload do `deposit_data-#########.json` para o site do lanÃ§amento.


---
description: >-
  Bliv en validator og hj√¶lp med at sikre eth2, en proof-of-stake blockchain. Alle med 32 ETH kan deltage.
---

# Guide: Hvordan til at satse p√• ETH2 Mainnet med Prysm p√• Ubuntu

{% hint style="danger" %}
**24 nov 2020 Opdatering**: Den [nye mainnet guide er placeret her](guide-or-how-to-setup-a-validator-on-eth2-mainnet/).

Instruktionerne nedenfor er nu for√¶ldet og kun til reference.
{% endhint %}











{% hint style="info" %}
[Prysm](https://github.com/prysmaticlabs/prysm) er en Go implementering af Ethereum 2.0 protokol med fokus p√• brugervenlighed, sikkerhed og p√•lidelighed. Prysm er udviklet af [Prysmatic Labs](https://prysmaticlabs.com/), en virksomhed med det eneste fokus p√• udviklingen af deres klient. Prysm er skrevet i Go og udgivet under en GPL-3.0-licens.
{% endhint %}

## üèÅ 0. Foruds√¶tninger

### üë©üíª F√¶rdigheder til at drive en eth2 validator og fyr node

Som validator for eth2, vil du typisk have f√∏lgende evner:

* operationel viden om, hvordan et eth2-fyr oprettes, k√∏res og vedligeholdes kontinuerligt
* en forpligtelse til at vedligeholde din validator 24/7/365
* grundl√¶ggende operativsystem f√¶rdigheder
* har l√¶rt det v√¶sentlige ved at se ['Introduktion til Eth2 & Staking for begyndere' af Superphiz](https://www.youtube.com/watch?v=tpkpW031RCI)
* har best√•et eller er aktivt tilmeldt [Eth2 Study Master kurset](https://ethereumstudymaster.com/)
* og har l√¶st [8 Ting Hver Eth2 validator b√∏r vide.](https://medium.com/chainsafe-systems/8-things-every-eth2-validator-should-know-before-staking-94df41701487)

### üéó **Minimumskrav**

* **Operativsystem:** 64-bit Linux \(dvs. Ubuntu 20.04 LTS\)
* **Processor:** Dual core CPU, Intel Core i5-760 eller AMD FX-8100 eller bedre
* **Memory:** 8GB RAM
* **Opbevaring:** 20 GB SSD
* **Internet:** Bredb√•ndsinternetforbindelse med hastigheder p√• mindst 1 Mbps.
* **Effekt:** P√•lidelig elektrisk effekt.
* **ETH saldo:** mindst 32 ETH og nogle ETH for indskudsgebyrer
* **Wallet**: Metamask installeret

### üèã‚ôÇ Anbefalet Hardwareops√¶tning

* **Operativsystem:** 64-bit Linux \(dvs. Ubuntu 20.04 LTS\)
* **Processor:** Quad core CPU, Intel Core i7-4770 eller AMD FX-8310 eller bedre
* **Hukommelse:** 16 GB RAM eller mere
* **Opbevaring:** 1TB SSD eller mere
* **Internet:** Bredb√•ndsinternetforbindelser med hastigheder p√• mindst 10 Mbps
* **Effekt:** P√•lidelig elektrisk effekt med uafbrudt str√∏mforsyning \(UPS\)
* **ETH saldo:** mindst 32 ETH og nogle ETH for indskudsgebyrer
* **Wallet**: Metamask installeret

{% hint style="warning" %}
:gnister: **Pro Validator Tip**: Anbefaler du meget at begynde med en helt ny udgave af et OS, VM og/eller maskine. Undg√• hovedpine ved IKKE at genbruge testnet-n√∏gler, tegneb√∏ger eller databaser til din mainnet validator.
{% endhint %}

### üîì Anbefalet eth2 validator Security Best Practices

Hvis du har brug for ideer eller en p√•mindelse om, hvordan du sikrer din validator, henvises til

{% page-ref page="guide-or-security-best-practices-for-a-eth2-validator-beaconchain-node.md" %}

### üõ† Setup Ubuntu

Hvis du har brug for at installere Ubuntu, henvises til

{% page-ref page="../overview-xtz/guide-how-to-setup-a-baker/install-ubuntu.md" %}

### üé≠ Ops√¶tning Metamask

Hvis du har brug for at installere Metamask, henvises til

{% page-ref page="../../wallets/browser-wallets/metamask-ethereum.md" %}

## üå± 1. K√∏b/bytte eller konsolidere ETH

{% hint style="info" %}
Hver 32 ETH du ejer giver dig mulighed for at g√∏re 1 validator. Du kan k√∏re tusindvis af validatorer med dit fyr node.
{% endhint %}

Din ETH \(eller multipla af 32 ETH\) b√∏r konsolideres i en enkelt adresse, der er tilg√¶ngelig med Metamask.

Hvis du har brug for at k√∏be/udveksle eller supplere din ETH til et multiplum af 32, s√• tjek ud:

{% page-ref page="guide-how-to-buy-eth.md" %}

## üë©üíª 2. Tilmelding til at v√¶re en validator p√• Launchpad

1. Installer afh√¶ngigheder, ethereum fundament indbetalingsv√¶rkt√∏j og generere dine to s√¶t af centrale par.

{% hint style="info" %}
Hver validator vil have to s√¶t n√∏glepar. En **signeringsn√∏gle** og en **tilbagetr√¶kningsn√∏gle.** Disse n√∏gler er afledt af en enkelt mnemonic s√¶tning. [F√• mere at vide om n√∏gler.](https://blog.ethereum.org/2020/05/21/keys/)
{% endhint %}

Du har valget mellem at downloade det forudbyggede [ethereum foundation depositum v√¶rkt√∏j](https://github.com/ethereum/eth2.0-deposit-cli) eller bygge det fra kilden.

{% tabs %}
{% tab title="Pre-built eth2deposit-cli" %}
Download eth2deposit-kli.

```bash
cd $HOME
wget https://github.com/ethereum/eth2.0-deposit-cli/releases/download/v1.0.0/eth2deposit-cli-9310de0-linux-amd64.tar.gz
```

Verificer SHA256 Checksum matcher checksummen p√• [udgivelsessiden](https://github.com/ethereum/eth2.0-deposit-cli/releases/tag/v1.0.0).

```bash
sha256sum eth2deposit-cli-9310de0-linux-amd64.tar.gz 
# SHA256 skal v√¶re
# b09da136895a7f77a4b430924ea2ae5827fa47b2bf444c4ea6fcfac5b04b8c8a
```

Udpak arkivet.

```text
tar -xvf eth2deposit-cli-9310de0-linux-amd64.tar.gz
cd eth2deposit-cli-9310de0-linux-amd64
```

Lav en ny mnemonic.

```text
./depositum new-mnemonic --chain mainnet
```
{% endtab %}

{% tab title="Build from source code" %}
Install√©r afh√¶ngigheder.

```text
sudo apt update
sudo apt install python3-pip git -y
```

Download kildekode og installer.

```text
mkdir ~/git
cd ~/git
git clone https://github.com/ethereum/eth2.0-deposit-cli.git
cd eth2.0-deposit-cli
sudo ./deposit.sh install
```

Lav en ny mnemonic.

```text
./deposit.sh new-mnemonic --chain mainnet
```
{% endtab %}

{% tab title="Advanced - Most Secure" %}
{% hint style="warning" %}
üî•**\[ Valgfri \] Pro Security Tip**: K√∏r eth2deposit-cli v√¶rkt√∏jet og generer din **mnemonic seed** til dine validator n√∏gler p√• en **air-gapped offline maskine**.

Du kan kopiere via USB-n√∏gle de forudbyggede eth2deposit-cli bin√¶re filer fra en online maskine til en air-gapped offline maskine.

* Beskytter mod n√∏gle-logning angreb, malware / virusbaserede angreb og andre firewall eller sikkerhedsudnyttelser.
* Fysisk isoleret fra resten af dit netv√¶rk.
* M√• ikke have en netv√¶rksforbindelse, kablet eller tr√•dl√∏s.
* Er ikke en VM p√• en maskine med en netv√¶rksforbindelse.
* F√• mere at vide om [air-gapping at wikipedia](https://en.wikipedia.org/wiki/Air_gap_%28networking%29).
{% endhint %}
{% endtab %}
{% endtabs %}

1. F√∏lg anvisningerne og v√¶lg en adgangskode. Skriv din mnemonic ned og behold dette sikkert og **offline**.
2. F√∏lg trinene p√• [https://launchpad.ethereum.org/](https://launchpad.ethereum.org/) mens du springer over de trin, du allerede lige har gennemf√∏rt. Unders√∏gelse af et2 fase 0 oversigtsmateriale. Forst√•else af eth2 er n√∏glen til succes!
3. Tilbage p√• launchpad websitet, upload din`deposit_data-#########.json` fundet i `validator_keys` mappe.
4. Forbind til startsk√¶rmen med din Metamask tegnebog, gennemse og accept√©r vilk√•rene.
5. Bekr√¶ft transaktionen\(s\). Der er en indskudstransaktion p√• 32 ETH for hver validator.

{% hint style="info" %}
Din transaktion sender og deponerer din ETH til den [officielle ETH2 indbetalingskontraktadresse. ](https://blog.ethereum.org/2020/11/04/eth2-quick-update-no-19/)

**Tjek**, _dobbeltcheck_, _**triple-check**_ at den officielle Eth2 depositum adresse er korrekt.[`0x00000000219ab540356cBB839Cbe05303d7705Fa`](https://etherscan.io/address/0x00000000219ab540356cbb839cbe05303d7705fa)
{% endhint %}

{% hint style="danger" %}
S√∏rg for at skrive ned eller optage din mnemoniske seed **offline**. _Ikke e-mail. Ikke sky._

Lav **offline sikkerhedskopier**, s√•som til en USB-n√∏gle til din **`validator_keys`** \`\`mappe.
{% endhint %}

## üõ∏ 3. Install a ETH1 node

{% hint style="info" %}
Ethereum 2.0 kr√¶ver en tilslutning til Ethereum 1.0 for at overv√•ge for 32 ETH validator indbetalinger. Hosting din egen Ethereum 1.0 node er den bedste m√•de at maksimere decentralisering og minimere afh√¶ngighed af tredjeparter s√•som Infura.
{% endhint %}

{% hint style="warning" %}
De efterf√∏lgende trin antager, at du har gennemf√∏rt [best practices security guide](guide-or-security-best-practices-for-a-eth2-validator-beaconchain-node.md).
{% endhint %}

Dit valg af enten [**OpenEthereum**](https://www.parity.io/ethereum/)**,** [**Geth**](https://geth.ethereum.org/)**,** [**Besu**](https://besu.hyperledger.org/) **eller** [**Nethermind**](https://www.nethermind.io/)**.**

{% tabs %}
{% tab title="OpenEthereum \(Parity\)" %}
#### ü§ñ Installer og k√∏r OpenEthereum.

```text
mkdir ~/openethereum && cd ~/openethereum
wget https://github.com/openethereum/openethereum/releases/download/v3.0.1/openethereum-linux-v3.0.1.zip
unzip openethereum*.zip
chmod +x openethereum
rm openethereum*.zip
```

opdatering: gear: **Ops√¶tning og konfigurer systemd**

K√∏r f√∏lgende for at oprette en **enhedsfil** for at definere din `eth1.service` -konfiguration.

```bash
kat > $HOME/eth1. ervice << EOF 
[Unit]
Beskrivelse = openethereum eth1 tjeneste
√ònsker = network-online. arget
Efter = network-online. arget 

[Service]
Bruger = $(whoami)
WorkingDirectory= /home/$(whoami)/openethereum
ExecStart = /home/$(whoami)/openethereum/openethereum --chain foundation
Genstart = on-failure

[Install]
WantedBy = multi-user. arget
EOF
```

Flyt enhedsfilen til `/etc/systemd/system` og giv tilladelser.

```bash
sudo mv $HOME/eth1.service /etc/systemd/system/eth1.service
```

```bash
sudo chmod 644 /etc/systemd/system/eth1.service
```

K√∏r f√∏lgende for at aktivere auto-start ved opstart.

```text
sudo systemctl daemon-reload
sudo systemctl aktiverer eth1
```

#### ‚õì Start OpenEthereum p√• mainnet.

```text
sudo systemctl start eth1
```
{% endtab %}

{% tab title="Geth" %}
#### üß¨ Installer fra lageret.

```text
sudo add-apt-repository -y ppa:ethereum/ethereum
sudo apt-get update -y
sudo apt-get install ethereum -y
```

‚öô **Ops√¶tning og konfigurer systemd**

K√∏r f√∏lgende for at oprette en **enhedsfil** for at definere din `eth1.service` -konfiguration.

```bash
kat > $HOME/eth1. ervice << EOF 
[Unit]
Beskrivelse = f√• eth1 tjeneste
√ònsker = network-online. arget
Efter = network-online. arget 

[Service]
Bruger = $(whoami)
ExecStart = /usr/bin/geth --rpc --http
Genstart = on-failure

[Install]
√ònskeAf = multi-bruger. arget
EOF
```

Flyt enhedsfilen til `/etc/systemd/system` og giv tilladelser.

```bash
sudo mv $HOME/eth1.service /etc/systemd/system/eth1.service
sudo chmod 644 /etc/systemd/system/eth1.service
```

K√∏r f√∏lgende for at aktivere auto-start ved opstart.

```text
sudo systemctl daemon-reload
sudo systemctl aktiverer eth1
```

#### ‚õì Begynd at f√• p√• mainnet.

```text
sudo systemctl start eth1
```
{% endtab %}

{% tab title="Besu" %}
#### üß¨ Installer java afh√¶ngighed.

```text
sudo apt install openjdk-11-jdk
```

#### üåú Download og unzip Besu.

```text
cd
wget -O besu.tar.gz https://bintray.com/hyperledger-org/besu-repo/download_file?file_path=besu-1.5.0.tar.gz
tar -xvf besu.tar.gz
rm besu.tar.gz
mv besu-1.5.0 besu
```

‚öô **Ops√¶tning og konfigurer systemd**

K√∏r f√∏lgende for at oprette en **enhedsfil** for at definere din `eth1.service` -konfiguration.

```bash
kat > $HOME/eth1. ervice << EOF 
[Unit]
Beskrivelse = openethereum eth1 tjeneste
√ònsker = network-online. arget
Efter = network-online. arget 

[Service]
Bruger = $(whoami)
WorkingDirectory= /home/$(whoami)/besu/bin
ExecStart = /home/$(whoami)/besu/bin/besu --data-path="$HOME/. thereum_besu"
Genstart = on-failure

[Install]
√ònsketAf = multi-bruger. arget
EOF
```

Flyt enhedsfilen til `/etc/systemd/system` og giv tilladelser.

```bash
sudo mv $HOME/eth1.service /etc/systemd/system/eth1.service
sudo chmod 644 /etc/systemd/system/eth1.service
```

K√∏r f√∏lgende for at aktivere auto-start ved opstart.

```text
sudo systemctl daemon-reload
sudo systemctl aktiverer eth1
```

#### ‚õì Start besu p√• mainnet.

```text
sudo systemctl start eth1
```
{% endtab %}

{% tab title="Nethermind" %}
#### ‚öô Installer afh√¶ngigheder.

```text
sudo apt-get update && sudo apt-get install libsnappy-dev libc6-dev libc6 unzip -y
```

#### üåú Download og udpak Holland.

```text
mkdir ~/nethermind && cd ~/nethermind
wget -O nethermind.zip https://nethdev.blob.core.windows.net/builds/nethermind-linux-amd64-1.8.77-9d3a58a.zip
unzip nethermind.zip
rm nethermind.zip
```

#### :flying_tallerken: Start Holland.

```text
./Holland.Launcher
```

* V√¶lg `Ethereum Node`
* V√¶lg `Ethereum (mainnet)` og v√¶lg derefter `Hurtig synkronisering`
* Ja for at aktivere web3 / JSON RPC
* Accepter standard IP
* Spring ethstats registrering over
{% endtab %}

{% tab title="Minimum Hardware Setup" %}
{% hint style="info" %}
Infura er velegnet til begr√¶nsede diskplads ops√¶tninger. K√∏r altid din egen fulde eth1 node, n√•r det er muligt.
{% endhint %}

Tilmeld dig en API-adgangsn√∏gle p√• [https://infura.io/](https://infura.io/)

1. Tilmeld dig for en gratis konto.
2. Bekr√¶ft din e-mailadresse.
3. Bes√∏g dit betjeningspanel [https://infura.io/dashboard](https://infura.io/dashboard)
4. Opret et projekt, giv det et navn.
5. V√¶lg **Mainnet** som ENDPOINT
6. Kopier din API-n√∏gle.
7. Opdater parameteren **http-web3provider** i afsnittet **start beacon chain**.

```bash
#example parameter
--http-web3provider=https://infura.io/v3/<YOUR_API_KEY>
```
{% endtab %}
{% endtabs %}



{% hint style="info" %}
Synkronisering af eth1 node kan tage op til 24 timer.
{% endhint %}

{% hint style="success" %}
Din eth1 node er fuldt synkroniseret, n√•r disse h√¶ndelser opst√•r.

* **`OpenEthereum:`** `Imported #<block number>`
* **`Geth:`** `Importeret ny k√¶de segment`
* **`Besu:`** `Importeret #<block number>`
* **`Holland:`** `Synkroniserer ikke l√¶ngere Gamle Headers`
{% endhint %}

#### üõ† Nyttige eth1.service kommandoer

¬§ üóí **For at se og f√∏lge eth1 logs**

```text
journalctl - u eth1 - f
```

üóí **For at stoppe eth1 tjeneste**

```text
sudo systemctl stop eth1
```

{% hint style="danger" %}
üõë **F√∏r du forts√¶tter resten af denne guide, Vi anbefaler, at du venter, indtil t√¶ttere p√• 1. dec, da Prysm koden hurtigt forbereder sig p√• mainnet.**üöß
{% endhint %}

## üí° 4. Install Prysm

```bash
mkdir ~/prysm && cd ~/prysm 
curl https://raw.githubusercontent.com/prysmaticlabs/prysm/master/prysm.sh --output prysm.sh && chmod +x prysm.sh 
```

{% hint style="info" %}
Prysm er en Ethereum 2.0 klient, og det kommer i to komponenter.

**Beacon chain client** - Ansvarlig for styring af tilstand af fyr k√¶de, validator shuffling, og meget mere.

**Validator client** - Ansvarlig for at producere nye blokke og attester i fyr k√¶de og shard k√¶der.
{% endhint %}

## üî• 5. Konfigurere port videresendelse og/eller firewall

Specifikke til din netv√¶rksops√¶tning eller indstillinger for cloud-udbyderen, [s√∏rg for, at din validators firewall-porte er √•bne og tilg√¶ngelige.](guide-or-security-best-practices-for-a-eth2-validator-beaconchain-node.md#configure-your-firewall)

* **Prysm beacon chain node** vil bruge port 12000 til udp og port 13000 til tcp
* **eth1** node kr√¶ver port 30303 for tcp og udp

{% hint style="info" %}
:gnister: **Port Forwarding Tip:** Du skal videresende og √•bne porte til din validator. Kontroller at det virker med [https://www.yougetsignal.com/tools/open-ports/](https://www.yougetsignal.com/tools/open-ports/) eller [https://canyouseeme.org/](https://canyouseeme.org/).
{% endhint %}

## üé© 6. Import√©r validator- n√∏gle

V√¶lg den korrekte kommando afh√¶ngigt af hvordan du har installeret **eth2deposit-cli.**

{% tabs %}
{% tab title="Pre-built eth2deposit-cli" %}
```bash
$HOME/prysm/prysm.sh validator konti import --keys-dir=$HOME/eth2deposit-cli-9310de0-linux-amd64/validator_keys
```
{% endtab %}

{% tab title="Built from source code" %}
```bash
$HOME/prysm/prysm.sh validator konti import --keys-dir=$HOME/git/eth2.0-deposit-cli/validator_keys
```
{% endtab %}
{% endtabs %}

Accepter standard placering af tegnebogen, angiv en ny adgangskode for at kryptere din tegnebog og angiv adgangskoden til dine importerede konti.

{% hint style="danger" %}
**ADVARSEL**: BRUG IKKE OPRINDELSESKEYSTORER TIL GYLDIGHED MED EN ANDEN KLIST, ELLER DU VIL F√Ö SLADT.
{% endhint %}

## üèÇ 7. Start fyr k√¶den

{% hint style="warning" %}
Hvis du har deltaget i et af de forudg√•ende testnet, skal du rydde databasen.

```bash
$HOME/prysm/prysm.sh beacon-chain --clear-db
```
{% endhint %}

Dit valg af at k√∏re et fyr k√¶de og validator manuelt fra kommandolinjen eller automatisk med systemd.

{% tabs %}
{% tab title="Systemd - Automated" %}
#### üç∞ Fordele ved at bruge systemd for dit fyr k√¶de og validator <a id="benefits-of-using-systemd-for-your-stake-pool"></a>

1. Auto-start dit fyr k√¶de, n√•r computeren genstarter p√• grund af vedligeholdelse, str√∏mafbrydelse, osv.
2. Genstart automatisk nedbrudt beacon k√¶de processer.
3. Maksimer dit fyr k√¶de op-tid og ydeevne.

#### üõ† Ops√¶tningsvejledning

K√∏r f√∏lgende for at oprette en **enhedsfil** for at definere din`beacon-chain.service` -konfiguration.

```bash
kat > $HOME/beacon-k√¶de. ervice << EOF 
# The eth2 beacon chain service (del af systemd)
# file: /etc/systemd/system/beacon-chain. ervice 

[Unit]
Beskrivelse = eth2 beacon chain service
√ònsker = network-online. arget
Efter = network-online. arget 

[Service]
Bruger = $(whoami)
Milj√∏ = "ClientIP=$(curl -s v4. dent.me)"
WorkingDirectory= /home/$(whoami)/prysm
ExecStart = /home/$(whoami)/prysm/prysm.sh beacon-chain --p2p-host-ip =${ClientIP} --monitoring-host="0.0.0. " --http-web3provider=http://127.0.0. :8545 --accept-terms-of-use 
Genstart = on-failure

[Install]
WantedBy = multi-user. arget
EOF
```

{% hint style="info" %}
Geth brugere kan opn√• h√∏jere ydeevne med

```bash
--http-web3provider=$HOME/.ethereum/geth.ipc
```
{% endhint %}

Flyt enhedsfilen til `/etc/systemd/system` og giv tilladelser.

```bash
sudo mv $HOME/beacon-chain.service /etc/systemd/system/beacon-k√¶de.service
sudo chmod 644 /etc/systemd/system/beacon-chain.service
```

K√∏r f√∏lgende for at aktivere auto-start ved opstartstid, og start derefter dit beacon node service.

```text
sudo systemctl daemon-reload
sudo systemctl enable beacon-chain
sudo systemctl start beacon-chain
```

{% hint style="success" %}
Godt arbejde. Dit fyr k√¶de styres nu af systemets p√•lidelighed og robusthed. Nedenfor er nogle kommandoer til brug af systemd.
{% endhint %}

### üõ† Nogle nyttige systemd kommandoer

#### ‚úÖ Kontroller om fyr k√¶den er aktiv

```text
sudo systemctl is- active beacon- chain
```

#### üîé Se status for fyr k√¶den

```text
sudo systemctl status beacon-chain
```

#### :mod uret: s_button: Genstarter fyr k√¶den

```text
sudo systemctl reload-or-genstart beacon-chain
```

#### üõë Stopper fyr k√¶den

```text
sudo systemctl stop beacon-chain
```

#### üóí Visning og filtrering af logfiler

```bash
journalctl --unit=beacon-chain --since=yesterday
journalctl --unit=beacon-chain --since=today
journalctl --unit=beacon-chain --since='2020-12-01 00:00' --until='2020-12-02 12:00:00'
```
{% endtab %}

{% tab title="CLI - Manual" %}
I en ny terminal, starte fyr k√¶den.

```bash
$HOME/prysm/prysm.sh beacon-chain \
--p2p-host-ip=$(curl -s v4.ident.me) \
--http-web3provider="http://127.0.0.1:8545"
--monitoring-host="0.0.0.0.0" \
--accept-terms-of-use
```

{% hint style="info" %}
Geth brugere kan opn√• h√∏jere ydeevne med

```bash
--http-web3provider=$HOME/.ethereum/geth.ipc
```
{% endhint %}
{% endtab %}
{% endtabs %}

## üß¨ 8. Start validator <a id="9-start-the-validator"></a>

Gem din validators adgangskode i en fil og g√∏r den skrivebeskyttet.

```bash
echo "my_password_goes_here" > $HOME/.eth2validators/validators-password.txt
sudo chmod 600 $HOME/.eth2validators/validators-password.txt
```

Dit valg af at k√∏re en validator manuelt fra kommandolinjen eller automatisk med systemd.

{% tabs %}
{% tab title="Systemd - Automated" %}
#### üç∞ Fordele ved at bruge systemd til din validator <a id="benefits-of-using-systemd-for-your-stake-pool"></a>

1. Auto-start din validator, n√•r computeren genstarter p√• grund af vedligeholdelse, str√∏mafbrydelse, osv.
2. Genstart automatisk nedbrudte valideringsprocesser.
3. Maksimer din validator op-tid og ydeevne.

#### üõ† Ops√¶tningsvejledning

K√∏r f√∏lgende for at oprette en **enhedsfil** for at definere din`validator.service` -konfiguration.

```bash
kat > $HOME/validator. ervice << EOF 
# Den eth2 validator tjeneste (del af systemd)
# fil: /etc/systemd/system/validator. ervice 

[Unit]
Beskrivelse = eth2 validator service
√ònsker = network-online. arget beacon-chain.service
Efter = network-online. arget 

[Service]
Bruger = $(whoami)
WorkingDirectory= /home/$(whoami)/prysm
ExecStart = /home/$(whoami)/prysm/prysm. h validator --accept-terms-of-use --wallet-password-file /home/$(whoami)/.eth2validators/validators-password. xt
Genstart = on-failure

[Install]
√ònsketBy = multi-bruger. arget
EOF
```

Flyt enhedsfilen til `/etc/systemd/system` og giv tilladelser.

```bash
sudo mv $HOME/validator.service /etc/systemd/system/validator.service
sudo chmod 644 /etc/systemd/system/validator.service
```

K√∏r f√∏lgende for at aktivere auto-start p√• opstartstidspunktet og start derefter din validator.

```text
sudo systemctl daemon-reload
sudo systemctl enable validator
sudo systemctl start validator
```

### üõ† Nogle nyttige systemd kommandoer

#### ‚úÖ Kontroller om validatoren er aktiv

```text
sudo systemctl is-aktiv validator
```

#### üîé Se status for validator

```text
sudo systemctl status validator
```

#### :countercuret s_button: Genstarter validator

```text
sudo systemctl reload-or-genstart validator
```

#### üõë Stop validator

```text
sudo systemctl stop validator
```

#### üóÑ Visning og filtrering af logfiler

```bash
journalctl --unit=validator --since=i g√•r
journalctl --unit=validator --since=today
journalctl --unit=validator --since='2020-12-01 00:00:00' --until='2020-12-02 12:00:00'
```
{% endtab %}

{% tab title="CLI - Manual" %}
Start validator i en ny terminal.

```bash
$HOME/prysm/prysm.sh validator \
--accept-terms-of-use \
--wallet-password-file /home/$(whoami)/.eth2validators/validators-password.txt
```
{% endtab %}
{% endtabs %}

Kontroller, at din **validator offentlige n√∏gle** vises i logfilerne. Eksempel nedenfor:

```text
INFO Aktiveret validator voting_pubkey: 0x2374.....7121
```

{% hint style="info" %}
**Validator client** - Ansvarlig for at producere nye blokke og attester i fyr k√¶de og shard k√¶der.

**Beacon chain client** - Ansvarlig for styring af tilstand af fyr k√¶de, validator shuffling, og meget mere.
{% endhint %}

{% hint style="success" %}
Tillykke. N√•r dit beacon-k√¶de er synkroniseret, validator op og k√∏re, du bare vente p√• aktivering. Denne proces tager op til 24 timer. N√•r du er tildelt, vil din validator begynde at oprette og stemme p√• blokke, mens du tjener ETH staking bel√∏nninger.

Brug [beaconcha.in](https://beaconcha.in/) og [registrer en konto](https://beaconcha.in/register) til at oprette advarsler og spore din validators ydeevne.
{% endhint %}

## üïí 9. Tid Synkronisering

{% hint style="info" %}
Fordi fyr k√¶de er afh√¶ngig af n√∏jagtige tidspunkter for at udf√∏re attesteringer og producere blokke, computerens tid skal v√¶re pr√¶cis til den rigtige NTP eller NTS-tid inden for 0. sekunder.
{% endhint %}

Ops√¶t **Chrony** med f√∏lgende guide.

{% hint style="info" %}
chrony er en implementering af Network Time Protocol og hj√¶lper med at holde computerens tid synkroniseret med NTP.
{% endhint %}

## üîé 10. Overv√•gning af din validator med Grafana og Prometheus

Prometheus er en overv√•gningsplatform, der indsamler m√•linger fra overv√•gede m√•l ved at skrabe HTTP endepunkter p√• disse m√•l. [Officiel dokumentation er tilg√¶ngelig her.](https://prometheus.io/docs/introduction/overview/) Grafana er et betjeningspanel, der bruges til at visualisere de indsamlede data.

### üê£ 10.1 Installation

Installer prometheus og prometheus node eksport√∏r.

```text
sudo apt-get install -y prometheus prometheus-node-exporter
```

Install√©r grafana.

```bash
wget -q -O - https://packages.grafana.com/gpg.key ¬§ sudo apt-key add -
echo "deb https://packages.grafana.com/oss/deb stable main" > grafana. ist
sudo mv grafana.list /etc/apt/sources.list.d/grafana.list
sudo apt-get update && sudo apt-get install -y grafana
```

Aktiver tjenester, s√• de starter automatisk.

```bash
sudo systemctl enable grafana-server.service
sudo systemctl enable prometheus.service
sudo systemctl enable prometheus-node-exporter.service
```

Opdater **prometheus.yml** placeret i `/etc/prometheus/prometheus.yml`

```bash
kat > $HOME/prometheus.yml << EOF
global:
  scrape_interval: 15s # Som standard, skrabe m√•l hver 15 sekunder.

  # Fastg√∏r disse etiketter til tidsserier eller advarsler, n√•r de kommunikerer med
  # eksterne systemer (f√∏deration, fjernlagring, Alertmanager).
  external_labels:
    monitor: 'codelab-monitor'

# En scrape-konfiguration indeholdende pr√¶cis et endepunkt til at skrabe:
# Her er det Prometheus selv.
scrape_configs:
  - job_name: 'node_exporter'
    static_configs:
      - targets: ['localhost:9100']
  - job_name: 'validator'
    static_configs:
      - targets: ['localhost:8081']
  - job_name: 'beacon node'
    static_configs:
      - targets: ['localhost:8080']
  - job_name: 'slasher'
    static_configs:
      - targets: ['localhost:8082']
EOF
sudo mv $HOME/prometheus. ml /etc/prometheus/prometheus.yml
```

Endelig genstarte tjenesterne.

```bash
sudo systemctl genstart grafana-server.service
sudo systemctl genstart prometheus.service
sudo systemctl genstart prometheus-node-exporter.service
```

Kontroller, at tjenesterne k√∏rer korrekt:

```text
sudo systemctl status grafana-server.service prometheus.service prometheus-node-exporter.service
```

{% hint style="info" %}
üí° **P√•mindelse**: S√∏rg for, at port 3000 er √•ben p√• firewall og/eller port viderestillet, hvis du har til hensigt at se overv√•gningsinfo fra en anden maskine.
{% endhint %}

### üì∂ 10.2 Ops√¶tning af Grafana Dashboards

1. √Öbn [http://localhost:3000](http://localhost:3000) eller [http://&lt;your](http://<your) validator's ip address&gt;:3000 i din lokale browser.
2. Log ind med **admin** / **admin**
3. Skift adgangskode
4. Klik p√• **konfigurationsgear** ikonet og derefter **Tilf√∏j datakilde**
5. V√¶lg **Prometheus**
6. S√¶t **Navn** til **"Prometheus**"
7. S√¶t **URL** til [http://localhost:9090](http://localhost:9090)
8. Klik p√• **Gem & Test**
9. **Download og gem** denne [**json-fil**](https://raw.githubusercontent.com/GuillaumeMiralles/prysm-grafana-dashboard/master/less_10_validators.json)**.** Eller hvis du har mere end 10 validatorer, brug denne [json-fil](https://raw.githubusercontent.com/GuillaumeMiralles/prysm-grafana-dashboard/master/more_10_validators.json).
10. Klik p√• **Opret +** ikon &gt; **Import**
11. Tilf√∏j dashboard af **Upload JSON-fil**
12. Klik p√• **Import√©r** knappen.

![Prysm dashboard](../../.gitbook/assets/prysm_dash.png)

### ‚ö† 10.3 Ops√¶tning Af Alarm Notifikationer

{% hint style="info" %}
Ops√¶t alarmer for at f√• besked, hvis dine validatorer g√•r offline.
{% endhint %}

F√• besked om problemer med dine validatorer. V√¶lg mellem e-mail, telegram, discord eller slack.

{% tabs %}
{% tab title="Email Notifications" %}
1. Bes√∏g [https://beaconcha.in/](https://beaconcha.in/)
2. Tilmeld dig ****for en **konto**
3. Bekr√¶ft din **e-mail**
4. S√∏g efter din **validator's offentlige adresse**
5. Tilf√∏j validatorer til din overv√•gningsliste ved at klikke p√• **bogm√¶rke-symbolet**.
{% endtab %}

{% tab title="Telegram Notifications" %}
1. V√¶lg **Notifikationskanaler** under klokkeikonet i menuen p√• Grafana. ![](../../.gitbook/assets/gra-noti.png)
2. Klik p√• **Tilf√∏j kanal**.
3. Giv notifikationskanalen et **navn**.
4. V√¶lg **Telegram** fra typelisten.
5. For at fuldf√∏re **Telegram API-indstillingerne**kr√¶ves en Telegram kanal og bot. For instruktioner om ops√¶tning af en bot med `@Botfar`, se [dette afsnit](https://core.telegram.org/bots#6-botfather) i Telegram-dokumentationen.
6. N√•r afsluttet, invitere bot til den nyoprettede kanal.
{% endtab %}

{% tab title="Discord Notifications" %}
1. V√¶lg **Notifikationskanaler** under klokkeikonet i menuen p√• Grafana. ![](../../.gitbook/assets/gra-noti.png)
2. Klik p√• **Tilf√∏j kanal**.
3. Tilf√∏j et **navn** til notifikationskanalen.
4. V√¶lg **Discord** fra typelisten.
5. For at fuldf√∏re ops√¶tningen, en Discord server \(og en tekst kanal tilg√¶ngelig\) samt en Webhook URL er p√•kr√¶vet. For instruktioner om ops√¶tning af Discord's Webhooks, se [dette afsnit](https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks) i deres dokumentation.
6. Angiv Webhook **URL** i Discord notifikationsindstillingspanelet.
7. Klik p√• **Send Test**, som vil skubbe en bekr√¶ftelsesmeddelelse til Discord kanalen.
{% endtab %}

{% tab title="Slack Notifications" %}
1. V√¶lg **Notifikationskanaler** under klokkeikonet i menuen p√• Grafana. ![](../../.gitbook/assets/gra-noti.png)
2. Klik p√• **Tilf√∏j kanal**.
3. Tilf√∏j et **navn** til notifikationskanalen.
4. V√¶lg **Slack** fra typelisten.
5. For instruktioner om ops√¶tning af en Slacks indg√•ende Webhooks, se [dette afsnit](https://api.slack.com/messaging/webhooks) i deres dokumentation.
6. Angiv Slack Incoming Webhook URL i **URL** feltet.
7. Klik p√• **Send Test**, som vil skubbe en bekr√¶ftelsesmeddelelse til Slack kanalen.
{% endtab %}
{% endtabs %}

{% hint style="success" %}
üéâ Tillykke med ops√¶tningen af din validator! Du er god til at g√• p√• eth2.0.

Har du fundet vores guide nyttig? Lad os vide med et tip og vi vil holde opdatere det.

Brug [cointr.ee til at finde vores donation ](https://cointr.ee/coincashew)adresser. üôå

Enhver feedback og alle pull anmodninger meget v√¶rdsat. üòÉ

H√¶ng ud og chat med andre stakere p√• telegram @ [https://t.me/coincashew](https://t.me/coincashew)üåõ
{% endhint %}

## üßô‚ôÇ 11. Opdaterer Prysm

Genstart beacon chain and validator as per normal operating procedures

{% tabs %}
{% tab title="Systemd - Automated" %}
```text
sudo systemctl reload-or-genstart beacon-chain
sudo systemctl reload-or-genstart validator
```
{% endtab %}

{% tab title="CLI - Manual" %}
```bash
#Control C til at afslutte b√•de din beacon-k√¶de og validator processer 
#Tryk pil op og skriv for at genstarte.
```
{% endtab %}
{% endtabs %}

## üß© 12. Referencemateriale

Vurder det h√•rde arbejde udf√∏rt af de fine folk p√• f√∏lgende links, der tjente som et fundament for at skabe denne guide.

{% embed url="https://discord.gg/KSA7rPr" %}

{% embed url="https://launchpad.ethereum.org/" caption="" %}

{% embed url="https://prylabs.net/participate" %}

{% embed url="https://docs.prylabs.network/docs/getting-started/" %}

## üéâ 13. Bonus Links

### üå∞ CoinCashew Guides for andre ETH2 klienter

{% page-ref page="guide-how-to-stake-on-eth2-with-lighthouse.md" %}

{% page-ref page="guide-how-to-stake-on-eth2-with-teku-on-ubuntu.md" %}

{% page-ref page="guide-how-to-stake-on-eth2-with-nimbus.md" %}

{% page-ref page="guide-how-to-stake-on-eth2-with-lodestar.md" %}

### üß± ETH2 Blok Explorers

{% embed url="https://beaconcha.in" caption="" %}

{% embed url="https://beaconscan.com" caption="" %}

### üóí Seneste Eth2 Info

{% embed url="https://www.reddit.com/r/ethstaker" caption="" %}

{% embed url="https://blog.ethereum.org" caption="" %}

{% embed url="http://invite.gg/ethstaker" caption="" %}

{% embed url="https://hackmd.io/@benjaminion/eth2\_news/" caption="" %}

## üî• 14. Yderligere Nyttige Tips

### üõë 14.1 Frivillig afslut en validator

{% hint style="info" %}
Brug denne kommando til at signalere dine intentioner for at stoppe valideringen med din validator. Det betyder, at du ikke l√¶ngere √∏nsker at satse med din validator og √∏nsker at slukke for din node.

* Frivillig udseende, tager mindst 2048 epoker \(eller ~ 9 dage\). Der er en k√∏ til at afslutte og en forsinkelse, f√∏r din validator endelig afsluttes.
* N√•r en validator er forladt i fase 0, er dette ikke reversibelt, og du kan ikke l√¶ngere genstarte valideringen igen.
* Dine penge vil ikke v√¶re tilg√¶ngelige for udbetaling f√∏r fase 1.5 eller senere.
* N√•r din validator forlader exit k√∏en og er sandt forladet, er det sikkert at slukke dit fyr node og validator.
{% endhint %}

```bash
$HOME/prysm/prysm.sh validator konti frivillig afslutning
```

### üîê 14.2 Bekr√¶ft din mnemonic s√¶tning

Ved hj√¶lp af eth2deposit-cli v√¶rkt√∏jet, s√∏rg for at du kan regenerere de samme eth2 n√∏gle par ved at genoprette dine `validator_keys`

```bash
./depositum eksisterende-mnemonic --chain mainnet
```

{% hint style="info" %}
N√•r **pubkey** er identisk, betyder det din **keystore fil** du har bekr√¶ftet din mnemonic s√¶tning korrekt. Andre felter vil v√¶re forskellige p√• grund af saltning.
{% endhint %}

### ü§ñ 14.3 Tilf√∏j yderligere validatorer

Ved hj√¶lp af eth2deposit-cli v√¶rkt√∏jet, kan du tilf√∏je flere validatorer ved at oprette en ny indbetalingsdatafil og `validator_keys`

For eksempel, hvis vi oprindeligt oprettede 3 validatorer, men nu √∏nsker at tilf√∏je 5 flere validatorer, kunne vi bruge f√∏lgende kommando.

```bash
./deposit existing-mnemonic --validator_start_index 3 --num_validators 5 --chain mainnet
```

F√¶rdigg√∏r trinene for at uploade `deposit_data-#######.json` til startsiden p√• startblokken.


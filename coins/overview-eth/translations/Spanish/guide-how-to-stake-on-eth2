---
description: >-
  Convi√©rtete en un validador y ayuda a asegurar eth2, una cadena de bloques de pruebas. Cualquiera con 32 ETH puede unirse.
---

# Gu√≠a: C√≥mo participar en ETH2 Mainnet con Prysm en Ubuntu

{% hint style="danger" %}
**Nov 24 2020 Update**: La nueva gu√≠a [mainnet se encuentra aqu√≠](guide-or-how-to-setup-a-validator-on-eth2-mainnet/).

Las instrucciones a continuaci√≥n ahora est√°n obsoletas y s√≥lo son de referencia.
{% endhint %}











{% hint style="info" %}
[Prysm](https://github.com/prysmaticlabs/prysm) es una implementaci√≥n de Ethereum 2.0 protocolo con enfoque en usabilidad, seguridad y fiabilidad. Prysm es desarrollado por [Prysmatic Labs](https://prysmaticlabs.com/), una empresa con el √∫nico enfoque en el desarrollo de su cliente. Prysm est√° escrito en Go y publicado bajo una licencia GPL-3.0.
{% endhint %}

## üèÅ 0. Prerrequisitos

### üë©üíª Habilidades para operar un validador eth2 y nodo baliza

Como validador de eth2, normalmente tendr√°s las siguientes habilidades:

* conocimiento operativo de c√≥mo configurar, ejecutar y mantener un nodo y validador de baliza eth2 continuamente
* un compromiso para mantener su validador 24/7/365
* habilidades b√°sicas del sistema operativo
* han aprendido lo esencial viendo ['Introducci√≥n a la Eth2 & Staking for Beginners' por Superphiz](https://www.youtube.com/watch?v=tpkpW031RCI)
* han pasado o est√° inscrito activamente en el [curso de estudios de Eth2](https://ethereumstudymaster.com/)
* y han le√≠do la [8 Cosas que cada validador de Eth2 deber√≠a saber.](https://medium.com/chainsafe-systems/8-things-every-eth2-validator-should-know-before-staking-94df41701487)

### üéó **Requisitos m√≠nimos de configuraci√≥n**

* **Sistema operativo:** Linux de 64-bit \\(i.e. Ubuntu 20.04 LTS\)
* **Procesador:** Dual core CPU, Intel Core i5‚Äì760 o AMD FX-8100 o mejor
* **Memory:** 8GB RAM
* **Almacenamiento:** 20GB SSD
* **Internet:** Conexi√≥n a Internet de banda ancha con velocidades de al menos 1 Mbps.
* **Poder:** Energ√≠a el√©ctrica fiable.
* **Saldo ETH:** al menos 32 ETH y algunos ETH por comisiones de dep√≥sito
* **Cartera**: Metamask instalado

### üèã‚ôÇ Configuraci√≥n recomendada de hardware

* **Sistema operativo:** Linux de 64-bit \\(i.e. Ubuntu 20.04 LTS\)
* **Procesador:** Quad core CPU, Intel Core i7‚Äì4770 o AMD FX-8310 o mejor
* **Memoria:** RAM de 16 GB o m√°s
* **Almacenamiento:** SSD de 1TB o m√°s
* **Internet:** Conexiones a Internet de banda ancha con velocidades de al menos 10 Mbps
* **Poder:** Energ√≠a el√©ctrica fiable con alimentaci√≥n ininterrumpida \(UPS\)
* **Saldo ETH:** al menos 32 ETH y algunos ETH por comisiones de dep√≥sito
* **Cartera**: Metamask instalado

{% hint style="warning" %}
‚ú® **Consejo del validador Pro**: Te recomendamos que comences con una nueva instancia de un sistema operativo, m√°quina virtual y/o m√°quina. Evite los dolores de cabeza no reutilizar claves de red de pruebas, billeteras, o bases de datos para su validador de red principal.
{% endhint %}

### üîì Mejores pr√°cticas recomendadas para validadores eth2

Si necesita ideas o un recordatorio sobre c√≥mo asegurar su validador, consulte

{% page-ref page="guide-or-security-best-practices-for-a-eth2-validator-beaconchain-node.md" %}

### üõ† Setup Ubuntu

Si necesita instalar Ubuntu, consulte

{% page-ref page="../overview-xtz/guide-how-to-setup-a-baker/install-ubuntu.md" %}

### üé≠ Configurar Metamask

Si necesita instalar Metamask, consulte

{% page-ref page="../../wallets/browser-wallets/metamask-ethereum.md" %}

## üå± 1. Comprar/intercambiar o consolidar ETH

{% hint style="info" %}
Cada 32 ETH que tengas te permite hacer 1 validador. Puede ejecutar miles de validadores con su nodo faro.
{% endhint %}

Su ETH \(o m√∫ltiplos de 32 ETH\) debe consolidarse en una sola direcci√≥n accesible con Metamask.

Si necesita comprar/intercambiar o recargar su ETH a un m√∫ltiplo de 32, eche un vistazo:

{% page-ref page="guide-how-to-buy-eth.md" %}

## üë©üíª 2. Reg√≠strate para ser un validador en el Launchpad

1. Instale dependencias, la herramienta de dep√≥sito de la fundaci√≥n ethereum y genere sus dos conjuntos de pares de claves.

{% hint style="info" %}
Cada validador tendr√° dos conjuntos de pares de claves. Una **clave de firma** y una **clave de retiro.** Estas claves se derivan de una sola frase mnem√≥nica. [M√°s informaci√≥n sobre claves.](https://blog.ethereum.org/2020/05/21/keys/)
{% endhint %}

Tienes la opci√≥n de descargar la [herramienta de dep√≥sito de cimientos ethereum](https://github.com/ethereum/eth2.0-deposit-cli) preconstruida o construirla desde la fuente.

{% tabs %}
{% tab title="Pre-built eth2deposit-cli" %}
Descargar eth2deposit-cli.

```bash
cd $HOME
wget https://github.com/ethereum/eth2.0-deposit-cli/releases/download/v1.0.0/eth2deposit-cli-9310de0-linux-amd64.tar.gz
```

Verifique que la suma de verificaci√≥n SHA256 coincide con la suma de verificaci√≥n en la p√°gina de [lanzamientos](https://github.com/ethereum/eth2.0-deposit-cli/releases/tag/v1.0.0).

```bash
sha256sum eth2deposit-cli-9310de0-linux-amd64.tar.gz 
# SHA256 debe ser
# b09da136895a7f77a4b430924ea2ae5827fa47b2bf444c4ea6fcfac5b04b8c8a
```

Extraer el archivo.

```text
tar -xvf eth2deposit-cli-9310de0-linux-amd64.tar.gz
cd eth2deposit-cli-9310de0-linux-amd64
```

Crea una nueva mnem√≥nica.

```text
./deposit new-mnemonic --chain mainnet
```
{% endtab %}

{% tab title="Build from source code" %}
Instalar dependencias.

```text
sudo apt update
sudo apt install python3-pip git -y
```

Descargar c√≥digo fuente e instalar.

```text
mkdir ~/git
cd ~/git
git clone https://github.com/ethereum/eth2.0-deposit-cli.git
cd eth2.0-deposit-cli
sudo ./deposit.sh install
```

Crea una nueva mnem√≥nica.

```text
./deposit.sh new-mnemonic --chain mainnet
```
{% endtab %}

{% tab title="Advanced - Most Secure" %}
{% hint style="warning" %}
üî•**\[ Optional \] Consejo de seguridad Pro**: Ejecute la herramienta eth2deposit-cli y genere su **semilla mnem√≥nica** para sus claves de validador en una **m√°quina sin conexi√≥n**.

Puede copiar a trav√©s de USB key los binarios eth2deposit-cli preconstruidos de una m√°quina online a una m√°quina sin conexi√≥n.

* Protege contra ataques de registro de claves, ataques basados en malware/virus y otras vulnerabilidades de seguridad o cortafuegos.
* Aislado f√≠sicamente del resto de su red.
* No debe tener una conexi√≥n de red, cableada o inal√°mbrica.
* No es una m√°quina virtual en una m√°quina con conexi√≥n de red.
* Obtenga m√°s informaci√≥n sobre [en la wikipedia](https://en.wikipedia.org/wiki/Air_gap_%28networking%29).
{% endhint %}
{% endtab %}
{% endtabs %}

1. Siga las instrucciones y elija una contrase√±a. Escribe tu mnem√≥nico y mant√©n esto seguro y **sin conexi√≥n**.
2. Sigue los pasos en [https://launchpad.ethereum.org/](https://launchpad.ethereum.org/) mientras te saltas los pasos que ya has completado. Estudiar el material general de la fase eth2 0. ¬°Entender eth2 es la clave del √©xito!
3. Volver al sitio web de launchpad, sube tu`deposit_data-#######.json` encontrado en el directorio `validator_keys`.
4. Con√©ctate al Launchpad con tu cartera Metamask, revisa y acepta los t√©rminos.
5. Confirmar la transacci√≥n\(s\). Hay una transacci√≥n de dep√≥sito de 32 ETH para cada validador.

{% hint style="info" %}
Your transaction is sending and depositing your ETH to the [official ETH2 deposit contract address. ](https://blog.ethereum.org/2020/11/04/eth2-quick-update-no-19/)

**Compruebe**, _doble verificaci√≥n_, _**cheque triple**_ que la direcci√≥n oficial del contrato de dep√≥sito Eth2 es correcta.[`0x000000219ab540356cB839Cbe05303d7705Fa`](https://etherscan.io/address/0x00000000219ab540356cbb839cbe05303d7705fa)
{% endhint %}

{% hint style="danger" %}
Aseg√∫rese de escribir o registrar su semilla mnem√≥nica **sin conexi√≥n**. _No es correo electr√≥nico. No en la nube._

Hacer **copias de seguridad sin conexi√≥n**, como una clave USB, de su **`validator_keys`** \`\`\`directory.
{% endhint %}

## üõ∏ 3. Install a ETH1 node

{% hint style="info" %}
Ethereum 2.0 requiere una conexi√≥n a Ethereum 1.0 para monitorear los dep√≥sitos de 32 validadores ETH. Alojamiento de su propio nodo Ethereum 1.0 es la mejor manera de maximizar la descentralizaci√≥n y minimizar la dependencia de terceros como Infura.
{% endhint %}

{% hint style="warning" %}
Los siguientes pasos asumen que ha completado la [gu√≠a de seguridad de buenas pr√°cticas](guide-or-security-best-practices-for-a-eth2-validator-beaconchain-node.md).
{% endhint %}

Tu elecci√≥n de [**OpenEthereum**](https://www.parity.io/ethereum/)**,** [**Geth**](https://geth.ethereum.org/)**,** [**Besu**](https://besu.hyperledger.org/) **o** [**mente**](https://www.nethermind.io/)**.**

{% tabs %}
{% tab title="OpenEthereum \(Paridad\)" %}
#### ü§ñ Instalar y ejecutar OpenEthereum.

```text
mkdir ~/openethereum && cd ~/openethereum
wget https://github.com/openethereum/openethereum/releases/download/v3.0.1/openethereum-linux-v3.0.1.zip
unzip openethereum*.zip
chmod +x openethereum
rm openethereum*.zip
```

**Configurar y configurar el sistema**

Ejecute lo siguiente para crear un **archivo de unidad** para definir su configuraci√≥n `eth1.service`.

```bash
gato > $HOME/eth1. ervice << EOF 
[Unit]
Descripci√≥n = openethereum eth1 servicio
Quiere = network-online. Destinar
Despu√©s = red en l√≠nea. objetivo 

[Service]
usuario = $(whoami)
WorkingDirectory= /home/$(whoami)/openethereum
ExecStart = /home/$(whoami)/openethereum/openethereum --chain foundation
Reiniciar = on-failure

[Install]
WantedBy = multi-usuario. objetivo
EOF
```

Mueva el archivo de unidad a `p/systemd/system` y otorgue permisos.

```bash
sudo mv $HOME/eth1.service /etc/systemd/system/eth1.service
```

```bash
sudo chmod 644 /etc/systemd/system/eth1.service
```

Ejecute lo siguiente para habilitar auto-inicio en el momento de arranque.

```text
sudo systemctl daemon-recarga
sudo systemctl habilitar eth1
```

#### ‚õì Iniciar OpenEthereum en mainnet.

```text
sudo systemctl inicia eth1
```
{% endtab %}

{% tab title="Geth" %}
#### üß¨ Instalar desde el repositorio.

```text
sudo add-apt-repository -y ppa:ethereum/ethereum
sudo apt-get update -y
sudo apt-get install ethereum -y
```

‚öô **Configurar y configurar el sistema**

Ejecute lo siguiente para crear un **archivo de unidad** para definir su configuraci√≥n `eth1.service`.

```bash
gato > $HOME/eth1. ervice << EOF 
[Unit]
Descripci√≥n = geth eth1 servicio
Quiere = network-online. Destinar
Despu√©s = red en l√≠nea. Destet 

[Service]
Usuario = $(whoami)
ExecStart = /usr/bin/geth --rpc --http
Reiniciar = on-failure

[Install]
WantedBy = multi-usuario. objetivo
EOF
```

Mueva el archivo de unidad a `p/systemd/system` y otorgue permisos.

```bash
sudo mv $HOME/eth1.service /etc/systemd/system/eth1.service
sudo chmod 644 /etc/systemd/system/eth1.service
```

Ejecute lo siguiente para habilitar auto-inicio en el momento de arranque.

```text
sudo systemctl daemon-recarga
sudo systemctl habilitar eth1
```

#### ‚õì Comenzar geth en mainnet.

```text
sudo systemctl inicia eth1
```
{% endtab %}

{% tab title="Besu" %}
#### üß¨ Instalar dependencia de java.

```text
sudo apt install openjdk-11-jdk
```

#### üåú Descargar y descomprimir Besu.

```text
cd
wget -O besu.tar.gz https://bintray.com/hyperledger-org/besu-repo/download_file?file_path=besu-1.5.0.tar.gz
tar -xvf besu.tar.gz
rm besu.tar.gz
mv besu-1.5.0 besu
```

‚öô **Configurar y configurar el sistema**

Ejecute lo siguiente para crear un **archivo de unidad** para definir su configuraci√≥n `eth1.service`.

```bash
gato > $HOME/eth1. ervice << EOF 
[Unit]
Descripci√≥n = openethereum eth1 servicio
Quiere = network-online. Destinar
Despu√©s = red en l√≠nea. objetivo 

[Service]
usuario = $(whoami)
WorkingDirectory= /home/$(whoami)/besu/bin
ExecStart = /home/$(whoami)/besu/bin/besu --data-path="$HOME/. thereum_besu"
Reinicio = "on-fail"

[Install]
WantedBy = multi-usuario. objetivo
EOF
```

Mueva el archivo de unidad a `p/systemd/system` y otorgue permisos.

```bash
sudo mv $HOME/eth1.service /etc/systemd/system/eth1.service
sudo chmod 644 /etc/systemd/system/eth1.service
```

Ejecute lo siguiente para habilitar auto-inicio en el momento de arranque.

```text
sudo systemctl daemon-recarga
sudo systemctl habilitar eth1
```

#### ‚õì Iniciar besu en mainnet.

```text
sudo systemctl inicia eth1
```
{% endtab %}

{% tab title="Nethermind" %}
#### ‚öô Instalar dependencias.

```text
sudo apt-get update && sudo apt-get install libsnappy-dev libc6-dev libc6 unzip -y
```

#### üåú Descargar y descomprimir la mente.

```text
mkdir ~/nethermind && cd ~/nethermind
wget -O nethermind.zip https://nethdev.blob.core.windows.net/builds/nethermind-linux-amd64-1.8.77-9d3a58a.zip
unzip nethermind.zip
rm nethermind.zip
```

#### üõ∏ Lanzamiento mente.

```text
./mind.Launcher
```

* Seleccione `Ethereum Node`
* Selecciona `Ethereum (mainnet)` y luego selecciona `Sincronizaci√≥n r√°pida`
* S√≠ para activar web3 / JSON RPC
* Aceptar IP por defecto
* Omitir registro de etstats
{% endtab %}

{% tab title="Minimum Hardware Setup" %}
{% hint style="info" %}
Infura es adecuada para configuraciones de espacio limitado. Ejecute siempre su propio nodo eth1 completo cuando sea posible.
{% endhint %}

Reg√≠strate para obtener una clave de acceso API en [https://infura.io/](https://infura.io/)

1. Reg√≠strese para obtener una cuenta gratuita.
2. Confirme su direcci√≥n de correo electr√≥nico.
3. Visita tu panel de control [https://infura.io/dashboard](https://infura.io/dashboard)
4. Crear un proyecto, darle un nombre.
5. Seleccione **Mainnet** como ENDPOINT
6. Copie su clave API.
7. Actualizar el par√°metro **http-web3provider** en la secci√≥n **start beacon chain**.

```bash
#example parameter
--http-web3provider=https://infura.io/v3/<YOUR_API_KEY>
```
{% endtab %}
{% endtabs %}



{% hint style="info" %}
La sincronizaci√≥n del nodo eth1 podr√≠a tardar hasta 24 horas.
{% endhint %}

{% hint style="success" %}
Su nodo eth1 est√° completamente sincronizado cuando se producen estos eventos.

* **`OpenEthereum:`** `Imported #<block number>`
* **`Geth:`** `Importado nuevo segmento de cadena`
* **`Besu:`** `Importado #<block number>`
* **`mente:`** `Ya no sincronizando Cabeceras Antiguas`
{% endhint %}

#### üõ† Comandos √∫tiles de eth1.service

üóí **Para ver y seguir los registros eth1**

```text
journalctl -u eth1 -f
```

üóí **Para detener el servicio eth1**

```text
parada de sistema sudo eth1
```

{% hint style="danger" %}
üõë **Antes de continuar con el resto de esta gu√≠a, te recomendamos que esperes hasta el 1 de Diciembre ya que el c√≥digo Prysm se est√° preparando r√°pidamente para mainnet.**üöß
{% endhint %}

## üí° 4. Install Prysm

```bash
mkdir ~/prysm && cd ~/prysm 
curl https://raw.githubusercontent.com/prysmaticlabs/prysm/master/prysm.sh --output prysm.sh && chmod +x prysm.sh 
```

{% hint style="info" %}
Prysm es un cliente de Ethereum 2.0 y viene en dos componentes.

**Cliente de la cadena Beacon** - Responible para gestionar el estado de la cadena beacon, el desplazamiento del validador, y m√°s.

**Cliente validador** - Responible por producir nuevos bloques y certificaciones en la cadena del faro y las cadenas de fragmentos.
{% endhint %}

## üî• 5. Configurar desv√≠o de puertos y/o firewall

Espec√≠ficamente para su configuraci√≥n de red o configuraci√≥n de proveedores de nube, [aseg√∫rese de que los puertos firewall de su validador est√°n abiertos y alcanzables.](guide-or-security-best-practices-for-a-eth2-validator-beaconchain-node.md#configure-your-firewall)

* **Prysm beacon chain node** usar√° el puerto 12000 para udp y el puerto 13000 para tcp
* **eth1** node requiere el puerto 30303 para tcp y udp

{% hint style="info" %}
‚ú® **Consejo de reenv√≠o de puertos:** Tendr√°s que redirigir y abrir puertos a tu validador. Verifique que est√° trabajando con [https://www.yougetsignal.com/tools/open-ports/](https://www.yougetsignal.com/tools/open-ports/) o [https://canyouseeme.org/](https://canyouseeme.org/).
{% endhint %}

## üé© 6. Importar clave de validador

Elija el comando correcto dependiendo de c√≥mo haya instalado **eth2deposit-cli.**

{% tabs %}
{% tab title="Pre-built eth2deposit-cli" %}
```bash
$HOME/prysm/prysm.sh validador cuentas importar --keys-dir=$HOME/eth2deposit-cli-9310de0-linux-amd64/validator_keys
```
{% endtab %}

{% tab title="Built from source code" %}
```bash
$HOMEimportar cuentas de validadores /prysm/prysm.sh --keys-dir=$HOME/git/eth2.0-deposit-cli/validator_keys
```
{% endtab %}
{% endtabs %}

Acepte la ubicaci√≥n predeterminada de la cartera, introduzca una nueva contrase√±a para cifrar su cartera e introduzca la contrase√±a para sus cuentas importadas.

{% hint style="danger" %}
**ADVERTENCIA**: NO UTILICE LOS KEYSTORES ORIGINALES PARA VALIDAR CON OTROS CLIENTOS, O USTED SER√Å SLASHADO.
{% endhint %}

## üèÇ 7. Iniciar la cadena del faro

{% hint style="warning" %}
Si particip√≥ en cualquiera de las redes de prueba anteriores, debe borrar la base de datos.

```bash
$HOME/prysm/prysm.sh beacon-chain --clear-db
```
{% endhint %}

Su elecci√≥n de ejecutar una cadena de baliza y validador manualmente desde la l√≠nea de comandos o autom√°ticamente con el sistema.

{% tabs %}
{% tab title="Systemd - Automated" %}
#### üç∞ Benefits of using systemd for your beacon chain and validator <a id="benefits-of-using-systemd-for-your-stake-pool"></a>

1. Iniciar autom√°ticamente su cadena de faros cuando el ordenador se reinicia debido al mantenimiento, interrupci√≥n de energ√≠a, etc.
2. Reinicie autom√°ticamente los procesos de la cadena de baliza bloqueada.
3. Maximice su tiempo de actividad y rendimiento de la cadena de balizas.

#### üõ† Instrucciones de configuraci√≥n

Ejecute lo siguiente para crear un **archivo de unidad** para definir su configuraci√≥n`beacon-chain.service`.

```bash
cat > $HOME/beacon-chain. ervice << EOF 
# El servicio de cadena de beacon eth2 (parte del sistema)
# archivo: /etc/systemd/system/beacon-chain. ervice 

[Unit]
Descripci√≥n = eth2 beacon chain service
Wants = network-online. Destinar
After = network-online. objetivo 

[Service]
Usuario = $(whoami)
Entorno = "ClientIP=$(curl -s v4. dent.me)"
WorkingDirectory= /home/$(whoami)/prysm
ExecStart = /home/$(whoami)/prysm/prysm.sh beacon-chain --p2p-host-ip=${ClientIP} --monitoring-host="0.0.0. " --http-web3provider=http://127.0.0. :8545 --accept-terms-of-use 
Restart = on-failure

[Install]
WantedBy = multi-usuario. objetivo
EOF
```

{% hint style="info" %}
Los usuarios de Geth pueden lograr un mayor rendimiento con

```bash
--http-web3provider=$HOME/.ethereum/geth.ipc
```
{% endhint %}

Mueva el archivo de unidad a `p/systemd/system` y otorgue permisos.

```bash
sudo mv $HOME/beacon-chain.service /etc/systemd/system/beacon-chain.service
sudo chmod 644 ma√±/systemd/system/beacon-chain.service
```

Ejecute lo siguiente para habilitar auto-start al momento de arranque y luego inicie su servicio de nodo beacon.

```text
sudo systemctl daemon-reload
sudo systemctl habilita beacon-chain
sudo systemctl start beacon-chain
```

{% hint style="success" %}
Buen trabajo. Su cadena de faros est√° ahora gestionada por la fiabilidad y robustez del sistema. Debajo hay algunos comandos para usar el sistema.
{% endhint %}

### üõ† Algunos comandos √∫tiles del sistema

#### ‚úÖ Comprueba si la cadena de baliza est√° activa

```text
sudo systemctl est√° activo beacon-chain
```

#### üîé Ver el estado de la cadena del faro

```text
sudo systemctl estado cadena beacon-becon
```

#### üîÑ Reiniciando la cadena del faro

```text
sudo systemctl recargar-o-reiniciar cadena beacon-
```

#### üõë Detener la cadena del faro

```text
sudo systemctl stop beacon-chain
```

#### üóí Ver y filtrar registros

```bash
journalctl --unit=beacon-chain --√≠e=ayer
journalctl --unit=beacon-chain --√≠e=hoy
journalctl --unit=beacon-chain --√≠e='2020-12-01 00:00:00' --until='2020-12-02 12:00:00'
```
{% endtab %}

{% tab title="CLI - Manual" %}
En una nueva terminal, inicie la cadena del faro.

```bash
$HOME/prysm/prysm.sh beacon-chain \
--p2p-host-ip=$(curl -s v4.ident.me) \
--http-web3provider="http://127.0.0.1:8545"
--monitoring-host="0.0.0.0" \
--accept-terms-of-use
```

{% hint style="info" %}
Los usuarios de Geth pueden lograr un mayor rendimiento con

```bash
--http-web3provider=$HOME/.ethereum/geth.ipc
```
{% endhint %}
{% endtab %}
{% endtabs %}

## üß¨ 8. Iniciar el validador <a id="9-start-the-validator"></a>

Almacena la contrase√±a de tu validador en un archivo y hazla de s√≥lo lectura.

```bash
echo "my_password_goes_here" > $HOME/.eth2validators/validators-password.txt
sudo chmod 600 $HOME/.eth2validators/validators-password.txt
```

Su elecci√≥n de ejecutar un validador manualmente desde la l√≠nea de comandos o autom√°ticamente con el sistema.

{% tabs %}
{% tab title="Systemd - Automated" %}
#### üç∞ Beneficios de usar systemd para su validador <a id="benefits-of-using-systemd-for-your-stake-pool"></a>

1. Iniciar autom√°ticamente el validador cuando el ordenador se reinicia debido al mantenimiento, interrupci√≥n de energ√≠a, etc.
2. Reiniciar autom√°ticamente los procesos validadores bloqueados.
3. Maximice su validador a tiempo de espera y rendimiento.

#### üõ† Instrucciones de configuraci√≥n

Ejecute lo siguiente para crear un **archivo de unidad** para definir su configuraci√≥n`validator.service`.

```bash
cat > $HOME/validador. ervice << EOF 
# El servicio de validaci√≥n eth2 (parte del sistema)
# archivo: /etc/systemd/system/validator. ervice 

[Unit]
Descripci√≥n = servicio de validadores eth2
Quiere = network-online. objetivo beacon-chain.service
After = network-online. objetivo 

[Service]
usuario = $(whoami)
WorkingDirectory= /home/$(whoami)/prysm
ExecStart = /home/$(whoami)/prysm/prysm. h validator --accept-terms-of-use --wallet-password-file /home/$(whoami)/.eth2validators/validators-password. xt
Reinicio = en falla

[Install]
WantedBy = multiusuario. objetivo
EOF
```

Mueva el archivo de unidad a `p/systemd/system` y otorgue permisos.

```bash
sudo mv $HOME/validator.service /etc/systemd/system/validator.service
sudo chmod 644 /etc/systemd/system/validator.service
```

Ejecute lo siguiente para habilitar auto-inicio al momento de arranque y luego inicie su validador.

```text
sudo systemctl daemon-reload
sudo systemctl habilitar validator
sudo systemctl start validator
```

### üõ† Algunos comandos √∫tiles del sistema

#### ‚úÖ Comprueba si el validador est√° activo

```text
sudo systemctl es validador activo
```

#### üîé Ver el estado del validador

```text
sudo systemctl status validator
```

#### üîÑ Reiniciando el validador

```text
validador de sudo systemctl recargar o reiniciar
```

#### üõë Detener el validador

```text
sudo systemctl stop validator
```

#### :file_gabinet: Ver y filtrar registros

```bash
journalctl --unit=validator --e=ayer
journalctl --unit=validator --i=hoy
journalctl --unit=validator --e='2020-12-01 00:00:00' --until='2020-12-02 12:00'
```
{% endtab %}

{% tab title="CLI - Manual" %}
En un nuevo terminal, inicie el validador.

```bash
$HOME/prysm/prysm.sh validador \
--accept-terms-of-use \
--wallet-password-file /home/$(whoami)/.eth2validators/validators-password.txt
```
{% endtab %}
{% endtabs %}

Verifica que tu **clave p√∫blica del validador** aparezca en los registros. Ejemplo a continuaci√≥n:

```text
INFO Activado validator voting_pubkey: 0x2374.....7121
```

{% hint style="info" %}
**Cliente validador** - Responible por producir nuevos bloques y certificaciones en la cadena del faro y las cadenas de fragmentos.

**Cliente de la cadena Beacon** - Responible para gestionar el estado de la cadena beacon, el desplazamiento del validador, y m√°s.
{% endhint %}

{% hint style="success" %}
Enhorabuena. Una vez que tu beacon-chain est√© sincronizado, validador activo y corriendo, s√≥lo esperas a la activaci√≥n. Este proceso tarda hasta 24 horas. Cuando te asignes, tu validador comenzar√° a crear y votar bloques mientras ganas ETH apuestando recompensas.

Usa [beaconcha.in](https://beaconcha.in/) y [registra una cuenta](https://beaconcha.in/register) para crear alertas y rastrear el rendimiento de tu validador.
{% endhint %}

## üïí 9. Sincronizaci√≥n de tiempo

{% hint style="info" %}
Debido a que la cadena de faros depende de tiempos precisos para realizar certificaciones y producir bloques, el tiempo de su computadora debe ser exacto a tiempo real NTP o NTS dentro de 0. segundos.
{% endhint %}

Configurar **Chrony** con la siguiente gu√≠a.

{% hint style="info" %}
chrony es una implementaci√≥n del Protocolo de Tiempo de Red y ayuda a mantener el tiempo de su computadora sincronizado con NTP.
{% endhint %}

## üîé 10. Monitoreando a tu validador con Grafana y Prometeo

Prometheus es una plataforma de monitoreo que recolecta m√©tricas de objetivos monitorizados mediante la eliminaci√≥n de m√©tricas HTTP en estos objetivos. [La documentaci√≥n oficial est√° disponible aqu√≠.](https://prometheus.io/docs/introduction/overview/) Grafana es un panel utilizado para visualizar los datos recolectados.

### üê£ Instalaci√≥n 10.1

Instale prometheus y prometheus node exporter.

```text
sudo apt-get install -y prometheus prometheub node-exporter
```

Instalar grafana.

```bash
wget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -
echo "deb https://packages.grafana.com/oss/deb stable main" > grafana. ist
sudo mv grafana.list.es/apt/sources.list.d/grafana.list
sudo apt-get update && sudo apt-get install -y grafana
```

Habilita los servicios para que se inicien autom√°ticamente.

```bash
sudo systemctl habilita grafana-server.service
sudo systemctl habilitar prometheus.service
sudo systemctl habilitar prometheichard node-exporter.service
```

Actualizaci√≥n **prometheus.yml** ubicada en `ma√±ana/prometheus/prometheus.yml`

```bash
cat > $HOME/prometheus.yml << EOF
global:
  scrape_interval: 15 # por defecto, scrape objetivos cada 15 segundos.

  # Adjuntar estas etiquetas a cualquier serie de tiempo o alertas al comunicarse con
  # sistemas externos (federaci√≥n, almacenamiento remoto, administrador de alertas).
  external_labels:
    monitor: 'codelab-monitor'

# Una configuraci√≥n de scrape que contiene exactamente un endpoint a scrape:
# Aqu√≠ est√° Prometheus.
scrape_configs:
  - job_name: 'node_exporter'
    static_configs:
      - targets: ['localhost:9100']
  - job_name: 'validator'
    static_configs:
      - targets: ['localhost:8081']
  - job_name: 'beacon node'
    static_configs:
      - targets: ['localhost:8080']
  - job_name: 'slasher'
    static_configs:
      - targets: ['localhost:8082']
EOF
sudo mv $HOME/prometheus. ml/prometheus/prometheus.yml
```

Por √∫ltimo, reinicie los servicios.

```bash
sudo systemctl restart grafana-server.service
sudo systemctl restart prometheus.service
sudo systemctl restart prometheoo node-exporter.service
```

Verificar que los servicios se est√°n ejecutando correctamente:

```text
sudo systemctl status grafana-server.service prometheus.service prometheub node-exporter.service
```

{% hint style="info" %}
üí° **Recordatorio**: Aseg√∫rate de que el puerto 3000 est√© abierto en el cortafuegos y/o el puerto reenviado si tienes la intenci√≥n de ver la informaci√≥n de monitoreo desde una m√°quina diferente.
{% endhint %}

### üì∂ 10.2 Configurando Grafana Dashboards

1. Abre [http://localhost:3000](http://localhost:3000) o [http://&lt;your](http://<your) validator's ip address&gt;:3000 en tu navegador local.
2. Iniciar sesi√≥n con **admin** / **admin**
3. Cambiar contrase√±a
4. Haga clic en el icono **del equipo de configuraci√≥n** , luego **A√±adir fuente de datos**
5. Seleccione **Prometeo**
6. Establezca **Nombre** a **"Prometheus**"
7. Establecer **URL** a [http://localhost:9090](http://localhost:9090)
8. Haga clic en **Guardar & Prueba**
9. **Descargue y guarde** este [**archivo json**](https://raw.githubusercontent.com/GuillaumeMiralles/prysm-grafana-dashboard/master/less_10_validators.json)**.** O si tienes m√°s de 10 validadores, usa este [archivo json](https://raw.githubusercontent.com/GuillaumeMiralles/prysm-grafana-dashboard/master/more_10_validators.json).
10. Haga clic en **Crear +** icono &gt; **Importar**
11. A√±adir panel a trav√©s de **Subir archivo JSON**
12. Haga clic en el bot√≥n **Importar**

![Tablero Prysm](../../.gitbook/assets/prysm_dash.png)

### ‚ö† 10.3 Configurar notificaciones de alerta

{% hint style="info" %}
Configurar alertas para recibir notificaciones si sus validadores se quedan sin conexi√≥n.
{% endhint %}

Recibe notificaciones de problemas con tus validadores. Elija entre correo electr√≥nico, telegram, discord o slack.

{% tabs %}
{% tab title="Email Notifications" %}
1. Visita [https://beaconcha.in/](https://beaconcha.in/)
2. Reg√≠strate ****para obtener una cuenta de ****
3. Verifique su **correo electr√≥nico**
4. Busca la direcci√≥n p√∫blica de tu validador ****
5. A√±ade validadores a tu lista de seguimiento haciendo clic en el **s√≠mbolo del marcador**.
{% endtab %}

{% tab title="Telegram Notifications" %}
1. En el men√∫ de Grafana, seleccione **Canales de notificaci√≥n** debajo del icono de la campana. ![](../../.gitbook/assets/gra-noti.png)
2. Haga clic en **A√±adir canal**.
3. Dale al canal de notificaci√≥n un **nombre**.
4. Seleccione **Telegram** de la lista Tipos.
5. Para completar la **configuraci√≥n de la API de Telegram**, se requiere un canal de Telegram y un bot. Para instrucciones sobre c√≥mo configurar un bot con `@Botfather`, vea [esta secci√≥n](https://core.telegram.org/bots#6-botfather) de la documentaci√≥n de Telegram.
6. Una vez completado, invita al bot al canal reci√©n creado.
{% endtab %}

{% tab title="Discord Notifications" %}
1. En el men√∫ de Grafana, seleccione **Canales de notificaci√≥n** debajo del icono de la campana. ![](../../.gitbook/assets/gra-noti.png)
2. Haga clic en **A√±adir canal**.
3. A√±ade un **nombre** al canal de notificaci√≥n.
4. Selecciona **Discord** de la lista de tipos.
5. Para completar la configuraci√≥n, se requiere un servidor de Discord \(y un canal de texto disponible\) as√≠ como una URL de Webhook. Para obtener instrucciones sobre c√≥mo configurar un Webhook de Discord, consulte [esta secci√≥n](https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks) de su documentaci√≥n.
6. Introduzca el Webhook **URL** en el panel de configuraci√≥n de notificaci√≥n de Discord.
7. Haz clic en **Enviar prueba**, que enviar√° un mensaje de confirmaci√≥n al canal de Discord.
{% endtab %}

{% tab title="Slack Notifications" %}
1. En el men√∫ de Grafana, seleccione **Canales de notificaci√≥n** debajo del icono de la campana. ![](../../.gitbook/assets/gra-noti.png)
2. Haga clic en **A√±adir canal**.
3. A√±ade un **nombre** al canal de notificaci√≥n.
4. Selecciona **Slack** de la lista Tipos.
5. Para obtener instrucciones sobre c√≥mo configurar un webhook entrante de Slack, consulte [esta secci√≥n](https://api.slack.com/messaging/webhooks) de su documentaci√≥n.
6. Introduzca la URL de Slack Incoming Webhook en el campo **URL**.
7. Haga clic en **Enviar prueba**, que enviar√° un mensaje de confirmaci√≥n al canal de Slack.
{% endtab %}
{% endtabs %}

{% hint style="success" %}
üéâ ¬°Felicidades por configurar tu validador! Es bueno ir a eth2.0.

¬øEncontraste √∫til nuestra gu√≠a? H√°ganos saber con un consejo y seguiremos actualiz√°ndolo.

Usa [cointr.ee para encontrar nuestras direcciones de donaci√≥n ](https://cointr.ee/coincashew). üôå

Cualquier comentario y todas las solicitudes de extracci√≥n son muy apreciadas. üòÉ

Descubra y hable con otros jugadores en telegram @ [https://t.me/coincashew](https://t.me/coincashew)üåõ
{% endhint %}

## üßô‚ôÇ 11. Actualizando Prysm

Reinicie la cadena de baliza y el validador seg√∫n los procedimientos operativos normales.

{% tabs %}
{% tab title="Systemd - Automated" %}
```text
sudo systemctl reload-or-restart beacon-chain
sudo systemctl reload-o-restart validator
```
{% endtab %}

{% tab title="CLI - Manual" %}
```bash
#Controla C para salir de tus procesos de cadena de balizas y validadores 
#Pulsa la flecha hacia arriba y entra para reiniciar.
```
{% endtab %}
{% endtabs %}

## üß© 12. Material de referencia

Apreciar el duro trabajo realizado por la gente fina en los siguientes enlaces que sirvieron de base para la creaci√≥n de esta gu√≠a.

{% embed url="https://discord.gg/KSA7rPr" %}

{% embed url="https://launchpad.ethereum.org/" caption="" %}

{% embed url="https://prylabs.net/participate" %}

{% embed url="https://docs.prylabs.network/docs/getting-started/" %}

## üéâ 13. Enlaces extras

### üå∞ Gu√≠as de CoinCashew para otros clientes de ETH2

{% page-ref page="guide-how-to-stake-on-eth2-with-lighthouse.md" %}

{% page-ref page="guide-how-to-stake-on-eth2-with-teku-on-ubuntu.md" %}

{% page-ref page="guide-how-to-stake-on-eth2-with-nimbus.md" %}

{% page-ref page="guide-how-to-stake-on-eth2-with-lodestar.md" %}

### üß± Exploradores de Bloques ETH2

{% embed url="https://beaconcha.in" caption="" %}

{% embed url="https://beaconscan.com" caption="" %}

### üóí √öltima informaci√≥n de Eth2

{% embed url="https://www.reddit.com/r/ethstaker" caption="" %}

{% embed url="https://blog.ethereum.org" caption="" %}

{% embed url="http://invite.gg/ethstaker" caption="" %}

{% embed url="https://hackmd.io/@benjaminion/eth2\_news/" caption="" %}

## üî• 14. Consejos √∫tiles adicionales

### üõë 14.1 Salir voluntariamente de un validador

{% hint style="info" %}
Utiliza este comando para indicar tus intenciones de dejar de validar con tu validador. Esto significa que ya no quieres apostar con tu validador y quieres apagar tu nodo.

* La salida voluntaria toma un m√≠nimo de 2048 epochs \(o ~9d√≠as\). Hay una cola para salir y un retraso antes de que el validador se cierre por fin.
* Una vez que un validador haya terminado en la fase 0, esto no es revertible y ya no puede volver a validar de nuevo.
* Sus fondos no estar√°n disponibles para su retiro hasta la fase 1.5 o posterior.
* Despu√©s de que su validador salga de la cola de salida y est√© realmente cerrado, es seguro apagar su nodo y validador.
{% endhint %}

```bash
$HOMEcuentas de validadores /prysm/prysm.sh de salida voluntaria
```

### üîê 14.2 Verifique su frase mnem√≥nica

Utilizando la herramienta eth2deposit-cli, aseg√∫rese de que puede regenerar los mismos pares de claves eth2 restaurando sus `validator_keys`

```bash
./deposit existing-mnemonic --chain mainnet
```

{% hint style="info" %}
Cuando la **pubkey** es id√©ntica, esto significa que el archivo **keystore** verific√≥ correctamente su frase mnem√≥nica. Otros campos ser√°n diferentes debido a la salaz√≥n.
{% endhint %}

### ü§ñ 14.3 A√±adir validadores adicionales

Usando la herramienta eth2deposit-cli, puede agregar m√°s validadores creando un nuevo archivo de datos de dep√≥sito y `validator_keys`

Por ejemplo, en caso de que originalmente creamos 3 validadores pero ahora queremos a√±adir 5 validadores m√°s, podr√≠amos usar el siguiente comando.

```bash
./deposit existing-mnemonic --validator_start_index 3 --num_validators 5 --chain mainnet
```

Completa los pasos para subir el `deposit_data-#########.json` al sitio del pad de lanzamiento.

